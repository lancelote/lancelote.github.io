<!DOCTYPE html>
<html prefix="            og: http://ogp.me/ns# article: http://ogp.me/ns/article#     " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Work hard - die Pythonic">
<meta name="viewport" content="width=device-width">
<title>Pavel Karateev</title>
<link href="assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="rss.xml">
<link rel="canonical" href="http://pavelkarateev.com/">
<!--[if lt IE 9]><script src="assets/js/html5shiv-printshiv.min.js"></script><![endif]--><link rel="prefetch" href="posts/2016/06/16/python-basics-and-usage/" type="text/html">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         
    <header id="header"><h1 id="brand"><a href="http://pavelkarateev.com/" title="Pavel Karateev" rel="home">

        <span id="blog-title">Pavel Karateev</span>
    </a></h1>

        

        
    <nav id="menu"><ul>
<li><a href="pages/about">About</a></li>
                <li><a href="https://twitter.com/Lancel0te">Twitter</a></li>
                <li><a href="archive.html">Archive</a></li>
                <li><a href="https://github.com/lancelote/lancelote.github.io">Source</a></li>
    
    
    </ul></nav></header><main id="content"><div class="postindex">
    <article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2016/06/16/python-basics-and-usage/" class="u-url">Завершен курс "Python основы и применение"</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2016/06/16/python-basics-and-usage/" rel="bookmark"><time class="published dt-published" datetime="2016-06-15T00:00:00+03:00" title="2016-06-15 00:00">2016-06-15 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Завершил курс "<a href="https://stepic.org/course/Python-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-%D0%B8-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-512">Python: основы и применение</a>"
от <a href="https://stepic.org/">Stepic.org</a>. Несмотря на название курс оказался весьма
интересным и не таким уж и базовым - полные новички в Python могут столкнуться с
проблемами. Мне очень понравилось, что были разобраны некоторые традиционно
пропускаемые вопросы (пресловутый Method Resolution Order), которые как раз очень
любят спрашивать на собеседованиях. Чуть подробнее о плюсах и минусах, а также
краткое содержание внутри.</p>
<p><img alt="center" src="images/2016/06/16/python-basics-and-usage/certificate.jpg"></p>
<h3>Содержание</h3>
<ul>
<li>Базовые принципы языка Python<ul>
<li>Модель данных: объекты</li>
<li>Функции и стек вызовов</li>
<li>Пространство имен и области видимости</li>
<li>Введение в классы</li>
<li>Наследование классов</li>
</ul>
</li>
<li>Стандартные средства языка Python<ul>
<li>Ошибки и исключения</li>
<li>Работа с кодом: импорты и модули</li>
<li>Итераторы и генераторы</li>
<li>Работа с файловой системой и файлами</li>
<li>Работа с функциями: <code>functools</code> и лямбда функции</li>
<li>Стиль программирования: pep8 и документация</li>
</ul>
</li>
<li>Применение Python: анализ текста<ul>
<li>Стандартные методы и функции для строк</li>
<li>Регулярные выражения в Python</li>
<li>Обзорно об интернете: http, html, <code>requests</code>
</li>
<li>Форматы текстовых файлов: CSV, JSON</li>
<li>API</li>
<li>XML, библиотека ElementTree, библиотека <code>lxml</code>
</li>
</ul>
</li>
</ul>
<h3>Плюсы</h3>
<ul>
<li>Затронуты важные углубленные темы (MRO, namespaces)</li>
<li>Хороший стартовый обзор стандартной библиотеки</li>
<li>Интересные практические задания по работе с файлами, сетью и API</li>
</ul>
<h3>Минусы (условные)</h3>
<ul>
<li>Короткий (всего 3 модуля)</li>
<li>Затронутые темы не объясняются подробно</li>
<li>Не подходит для полных новичков</li>
</ul>
<h3>Резюме</h3>
<p>Отличный курс для тех кто прошел базовое обучение Python и теперь не знает
куда податься. Здесь еще раз пробегутся по важным особенностям языка и дадут
несколько хороших практических заданий, чтобы вы могли прочувствовать на что
способен язык.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2016/06/15/intermediate-python/" class="u-url">Перевод книги "Intermediate Python"</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2016/06/15/intermediate-python/" rel="bookmark"><time class="published dt-published" datetime="2016-06-15T00:00:00+03:00" title="2016-06-15 00:00">2016-06-15 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Не так давно я закончил перевод небольшой книги от разработчика из
Пакистана - <a href="https://twitter.com/yasoobkhalid">Yasoob Khalid</a> -
"<a href="https://github.com/lancelote/interpy-ru">Intermediate Python</a>". Не уверен как
лучше перевести <em>Intermediate</em> в данном контексте, но смысл в том что книга для
уже освоивших базовый Python программистов. Её основная идея дать читателю краткий обзор
нюансов языка, которые остаются за кадром базовых курсов/книг/руководств, ведь в
Python при всей его интуитивности и простоте есть немало сложных, специфических,
да и просто традиционных решений, как впрочем и в любом другом языке.</p>
<h3>О книге</h3>
<p>Книга представляет сборник небольших несвязанных глав, каждая из которых описывает
определенный "нюанс" языка. Главы не претендуют на полноценное описание вопроса,
а скорее просто дают читателю общее представление и пути для дальнейшего исследования.
Думаю всем начинающим, а может быть и опытным питонистам будет интересно.
Ниже приведено содержание с ссылками на главы, чтобы проще было сориентироваться
в затронутых тематиках.</p>
<h3>Содержание</h3>
<ul>
<li>Средства разработки<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/virtual_environment.html">Виртуальное окружение</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/debugging.html">Отладка</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/object_introspection.html">Анализ объекта</a></li>
</ul>
</li>
<li>Синтаксис<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/exceptions.html">Исключения</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/for_-_else.html">for - else</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/ternary_operators.html">Тернарные операторы</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/global_&amp;_return.html">global и return</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/open_function.html">Функция open</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/args_and_kwargs.html">*args и **kwargs</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/context_managers.html">Менеджеры контекста</a></li>
</ul>
</li>
<li>Функциональное программирование<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/enumerate.html">enumerate</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/lambdas.html">Анонимные функции</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/set_-_data_structure.html">Структура данных set</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/map_filter.html">map и filter</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/comprehensions.html">Абстракция списков</a></li>
</ul>
</li>
<li>Структуры данных<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/generators.html">Генераторы</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/coroutines.html">Корутины</a></li>
</ul>
</li>
<li>Типы данных<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/collections.html">collections</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/mutation.html">Изменяемость</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/__slots__magic.html">Магия __slots__</a></li>
</ul>
</li>
<li>Декораторы<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/decorators.html">Что такое декоратор?</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/function_caching.html">Кэширование функций</a></li>
</ul>
</li>
<li>Разное<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/one_liners.html">Однострочники</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/python_c_extension.html">Python C расширения</a></li>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/book/targeting_python_2_3.html">Разработка под Python 2+3</a></li>
</ul>
</li>
</ul>
<p><em>Разбивка на части условна</em></p>
<h3>Ссылки</h3>
<p>Книга:</p>
<ul>
<li><a href="https://lancelote.gitbooks.io/intermediate-python/content/">Онлайн версия на gitbook</a></li>
<li><a href="https://www.gitbook.com/book/lancelote/intermediate-python/details">Скачать с gitbook (pdf, mobi, epub)</a></li>
<li><a href="https://github.com/lancelote/interpy-ru/releases/tag/v1.0.0">Скачать с github (pdf, mobi, epub)</a></li>
</ul>
<p>Репозитории:</p>
<ul>
<li><a href="https://github.com/lancelote/interpy-ru">Репозиторий перевода</a></li>
<li><a href="https://github.com/yasoob/intermediatePython">Репозиторий оригинала (ENG)</a></li>
</ul>
<p>Фидбек:</p>
<ul>
<li><a href="https://github.com/lancelote/interpy-ru/issues/new">Отзывы/пожелания/баги</a></li>
<li><a href="https://github.com/lancelote/interpy-ru/pull/new/master">Pull requests</a></li>
</ul>
<h3>Помощь проекту</h3>
<p>Если вы хотите отблагодарить автора книги за работу, то отличным вариантом будет
купить специальную версию его книги на <a href="https://gum.co/intermediate_python">Gumroad</a>.</p>
<p>И оригинал и перевод с удовольствием принимают <a href="https://github.com/lancelote/interpy-ru/issues/new">сообщения об ошибках</a> и
<a href="https://github.com/lancelote/interpy-ru/pull/new/master">pull request'ы</a>, в том числе новые главы, исправление или изменение старых и т.п.</p>
<h3>Другие подобные ресурсы "второго шага"</h3>
<ul>
<li>
<a href="https://stepic.org/course/Python-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D1%8B-%D0%B8-%D0%BF%D1%80%D0%B8%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-512">Python: основы и применение</a> - курс от Stepic.org, не пугайтесь названия, он
 хоть и простой, но затронуты интересные темы, которые часто опускаются (например,
 Method Resolution Order), плюс немного интересной практики</li>
<li>
<a href="https://www.amazon.com/Effective-Python-Specific-Software-Development/dp/0134034287">Effective Python - Brett Slatkin</a> - книга от инженера Google, представляет
 собой 49 "мантр" написание качественного Python кода, оценки на Amazon говорят
 сами за себя</li>
<li>
<a href="https://github.com/brennerm/PyTricks">PyTricks</a> - репозиторий с примерами
 различных темных и не очень уголков языка, представляет собой code snippets</li>
<li>...</li>
</ul>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2016/02/18/oss-university-start/" class="u-url">First FreeCodeCamp project is complete</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2016/02/18/oss-university-start/" rel="bookmark"><time class="published dt-published" datetime="2016-02-18T00:00:00+03:00" title="2016-02-18 00:00">2016-02-18 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Not long ago I have started my <a href="http://www.freecodecamp.com/lancelote">FreeCodeCamp</a>
path thanks to <a href="https://smartprogress.do/goal/162912/">smartprogress.do</a> to
gain a better knowledge of frontend technology stack. I was somewhat sceptical
that time about my capabilities in the area ("I am not a designer - I'm an
engineer") and I did no like front end altogether. All that billions of
JS-related technologies and HTML with CSS on top of the cake, gosh! Time has passed
and I have catch myself today enjoining of frontend development. So, what is
happened to me? Not much in reality.</p>
<p><img alt="center" src="images/2016/02/18/ayn-rand-tribute/smartprogress.jpg"></p>
<h3>Smartprogress</h3>
<p>First of all, thanks Lord I found this website. It has pretty ugly layout, bad
translation and I really hate when something is broken there again, but it
value lies in different place. It has opened for me the importance of
collaboration with passionate people and how it can greatly motivate you
toward your goals. I do not call you to start using smartprogress but I call
you to start collaborate with people in any way you will find appropriate. It will
have dramatic effect on you live - trust me, solitude seems not be the best
choice in IT.</p>
<h3>FreeCodeCamp</h3>
<p>Thanks to my new friends at smartprogress I have fond this gorgeous online learning
platform. It's fully free and has a great foundation idea ever - 'PRACTICE'! 
Yeap, "practise makes perfect", simple but powerful idea we forgot too
frequently. To gain maximum from this opportunity I have combined it with
the new learning style I have started to practise this year - little steps every day.
Push forward every day no matter how far. Let it be just a little code change
or a new book page - push forward! Step by step I have reached first FreeCodeCamp
project.</p>
<h3>Codepen.io</h3>
<p>I was surprised of the project difficulty (that was a portfolio one).
Perhaps old me would never be able to finish it not even because
of it's complexity (in fact it is super easy) but due to my laziness or should
I say overwhelming of guides, tutorials, projects, podcasts and video typical
novice developer face every day. But I have started to work on it step by step and was
surprised how fast in fact everything starts to go. Here we have another
great platform I have started to use - <a href="http://codepen.io/">codepen.io</a>. It is simple
online front end playground. Great tools has a major impact not only on our
productivity but on our mental attitude and codepen helps me greatly - it's
really convenient and aspirational for beginner to see instantaneous effect
of his or her css tweaks. I encourage you to give this nice service a try, it's not only
an online editor but also a social platform for frontend developers +great blog
and podcast.</p>
<h3>First Project</h3>
<p>So my first project is complete now. It is ultra simple one page
<a href="http://codepen.io/lancelote/full/OMqbMx/">Ayn Rand tribute</a> and I really
enjoyed working on it. Personal Portfolio is 50% ready and I hope to complete
it soon and use here - current about page is too simple as for me.</p>
<h3>English</h3>
<p>As always please excuse my poor English skill. I invest a lot of spare time in
developing my language proficiency, but it is still not awesome enough. I would
greatly appreciate any recommendation and corrections!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2016/01/11/oss-university-start/" class="u-url">OSS University Path</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2016/01/11/oss-university-start/" rel="bookmark"><time class="published dt-published" datetime="2016-01-11T00:00:00+03:00" title="2016-01-11 00:00">2016-01-11 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Sadly I have no solid background in CS. There were few CS-related courses in
the University (C++, Optimisation, math and so on), but the major part of my
expertise comes from the experience. My field knowledge is pretty broad, but it
is shallow in some places (in a lot of places) and has big holes here and there.
That is why I really hope Open Source Society University initiative will help
me build vast and complete CS "base".</p>
<p><img alt="center" src="images/2016/01/11/oss-university/ossu-logo.png"></p>
<h2>What is Open Source Society University?</h2>
<p><a href="https://github.com/open-source-society/computer-science" title="Open Source Society University">Open Source Society University</a>:</p>
<pre class="code literal-block"><span></span>This is a solid path for those of you who want to complete a Computer
Science course on your own time, for free, with courses from the best
universities in the World.

In our curriculum, we gave preference to MOOC (Massive Open Online Course)
style courses because those courses were created with our style of
learning in mind.
</pre>


<p>So we have some kind of well known JavaScript Path, but in the broad field
of Computer Science. There is a long list of MOOCs, one also should build
projects after each course.</p>
<h2>My Plans</h2>
<p>I consider January as a good start point for OSS University path. So, let's do
it. I'll track my progress and post status here. The first course is basic -
<a href="https://www.edx.org/course/introduction-computer-science-harvardx-cs50x#!" title="Introduction to Computer Science">Introduction to Computer Science</a> by edX, nevertheless I does not plan to
skip it. With me patience = )</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2015/12/04/taskbuster-tutorial/" class="u-url">Taskbuster Tutorial</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2015/12/04/taskbuster-tutorial/" rel="bookmark"><time class="published dt-published" datetime="2015-12-04T00:00:00+03:00" title="2015-12-04 00:00">2015-12-04 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>From time to time I check out my <em>ToRead</em> folder (believe me it is infinite),
and guess what I found there a week ago - BEST DJANGO TUTORIAL I EVER READ!
Just go ahead and look at this beauty: <a href="http://www.marinamele.com/taskbuster-django-tutorial">Taskbuster Django Tutorial by Marina Mele</a>.
Table of content is available inside the <em>Read more...</em>. So why am I so excited
about it? Because <a href="https://twitter.com/Marina_Mele">Marina</a> used a rare way to
approach tutorial creation. She did not start with <em>no one used in real world</em>
practises like many authors do, but goes straight to the best Django
development patterns. She even wrote about environment variables!</p>
<p><img alt="center" src="images/2015/12/04/taskbuster/taskbuster.jpg"></p>
<h3>Table of Content</h3>
<ul>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/taskbuster-working-environment-and-start-django-project">Part I – Working environment and start a Django Project</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/settings-different-environments-version-control">Part II – Settings files and Version control</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/create-home-page-with-tdd-staticfiles-templates-settings">Part III – Create a Home Page with TDD, Staticfiles and Templates settings</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/template-inheritance-website-files-and-testing-with-coverage">Part IV – Template Inheritance, Website files and Testing with coverage</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/internationalization-localization-languages-time-zones">Part V – Internationalization and Localization. Languages and Time zones</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/documenting-project-github-readthedocs">Part VI – Documenting the TaskBuster Django Boilerplate</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/install-and-configure-posgresql-for-django">Part VII.a – Install and Configure PostgreSQL</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/install-and-configure-mysql-for-django">Part VII.b – Install and Configure MySQL</a></li>
<li><a href="http://www.marinamele.com/user-authentication-with-google-using-django-allauth">Part VIII – User Authentication with a Google Account using Django Allauth</a></li>
<li><a href="http://www.marinamele.com/user-authentication-with-twitter-using-django-allauth">Part VIII.b – User Authentication with Twitter using Django Allauth</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/model-creation-onetoone-relationship-signals-django-admin">Part IX – Model creation, OneToOne relations, signals, Django Admin</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/model-creation-foreignkey-relationship-testing-django-admin">Part X – Model creation, ForeignKey relations, testing, Django Admin</a></li>
</ul>
<h3>Especially Interesting Topics</h3>
<p>Just few topics I want to especially mention:</p>
<ul>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/taskbuster-working-environment-and-start-django-project">Environment variable</a></li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/settings-different-environments-version-control">Multiple settings files</a></li>
<li>
<a href="http://www.marinamele.com/taskbuster-django-tutorial/install-and-configure-posgresql-for-django">PostgreSQL</a> and <a href="http://www.marinamele.com/taskbuster-django-tutorial/install-and-configure-mysql-for-django">MySQL</a>
</li>
<li>Social AUTH with <a href="http://www.marinamele.com/user-authentication-with-google-using-django-allauth">Google</a> and <a href="http://www.marinamele.com/user-authentication-with-twitter-using-django-allauth">Twitter</a>
</li>
<li>TDD</li>
<li><a href="http://www.marinamele.com/taskbuster-django-tutorial/internationalization-localization-languages-time-zones">Internationalization and Localization</a></li>
</ul>
<h3>To be continued...</h3>
<p>So the tutorial is not finished yet. And maybe it will not be finished,
but it is already an excellent source of knowledge for any Junior (Middle?)
Django developer and I really encourage you to check it out if you interesting
in the Wev Development, Python and Django of course.</p>
<h3>Should I start my Django/Python way there?</h3>
<p>No, perhaps no. <a href="http://tutorial.djangogirls.org/">DjangoGirls tutorial</a> is more suitable for complete
beginners. Taskbuster is a good next step, when you already know some basics.</p>
<h3>I know a better tutorial</h3>
<p>Please go ahead and share it in the comments section below!</p>
<h2>Grammar</h2>
<p>I want to switch the blog language from Russian to English and this article
will be the first English one here. Though I'm not an English native speaker
so I bet there're a lot (A LOT) of errors/typos and so on. I beg your pardon!
I do my best to improve my English knowledge and practise makes perfect. I
would definitely appreciate any corrections and suggestions!</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2015/05/01/web-app-arch/" class="u-url">Онлайн курс Web Application Architectures</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2015/05/01/web-app-arch/" rel="bookmark"><time class="published dt-published" datetime="2015-05-01T00:00:00+03:00" title="2015-05-01 00:00">2015-05-01 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Только что завершил последнее задание курса <a href="https://class.coursera.org/webapplications-003">Web Application Architectures</a> от университета Нью-Мексико и Coursera. Потрачено ли время зря?</p>
<h3>Что объясняют и насколько сложен курс?</h3>
<p>Курс оказался довольно простым в плане прохождения (зачем нужны задания на программирование, где буква в букву предлагается вбивать код из последней лекции соответствующего модуля я так и не понял), однако в плане понимания все обстоит несколько иначе. В лекциях затрагивается большое количество тем, начиная с Ruby on Rails и самого языка Ruby, а также непосредственно архитектуры веб приложений + HTML, CSS, JS, Ajax. Даже грешный git засветился. Объем при этом всего 6 недель, в результате чего получаем абсолютно неубедительные попытки что-то объяснить.</p>
<h3>Тематичный плач</h3>
<p>Думаю, что в погоне за низким порогом вхождения на курс ("вам нужно иметь только  руки и монитор, чтобы принять участие!") авторы многих новых онлайн курсов приносят в жертву содержание, которое по сути - единственно, что принципиально важно. Как итог, попытка построить в голове у студента титаническую конструкцию из стека технологий приводит к её обрушению, под развалинами которой погребается юный неофит. Существует 1000 и одно отличное руководство по HTML и git, зачем плодить некачественные дубликаты?</p>
<h3>Так стоит ли браться?</h3>
<p>Если хотите немного расширить кругозор в области проектирования веб-приложений и есть излишек свободного времени, который, дырку над ним в небе, некуда пристроить совершенно. А такое вообще бывает? Вот то-то и оно.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2015/04/21/djangogirls-ru/" class="u-url">Перевод руководства Djangogirls</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2015/04/21/djangogirls-ru/" rel="bookmark"><time class="published dt-published" datetime="2015-04-21T00:00:00+03:00" title="2015-04-21 00:00">2015-04-21 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p><strong>Djangogirls</strong> - это некоммерческая организация, занимающаяся поддержкой программирования и конкретно Django в женской среде. Основная работа заключается в проведении семинаров по всему миру для начинающих, на которых леди могут под чутким руководством менторов собрать свой собственный блог на Django и пройти другие этапы знакомства с фреймворком, Python, git и другими релевантными технологиями.</p>
<p><img alt="center" src="images/2015/04/21/djangogirls-ru/djangogirls_logo.png"></p>
<p>Материал семинаров скомпилирован в <a href="http://tutorial.djangogirls.org/en/index.html">руководстве по Django</a> и переводится на волонтерской основе на различные языки при помощи платформы <a href="https://crowdin.com/project/django-girls-tutorial">crowdin.com</a></p>
<p>Я наткнулся на проект случайно через, уже упомянутый, crowdin.com, вбив в поиск Python. Учебник действительно стоящий (хотя без ментора или багажа знаний за плечами тяжеловат для восприятия), я быстро его пробежал и загорелся идей добить русскоязычный перевод, на тот момент он был в стадии 5-10%. Сейчас задача, в основном, закончена. На плашке красуется 100%, однако предстоит еще длительная вычитка и правки. Надеюсь, что перевод выйдет в релиз на сайте учебника в этом месяце.</p>
<p>Если у вас есть желание помочь с переводом или содержанием учебника, пожалуйста, не стесняйтесь врываться на <a href="https://crowdin.com/project/django-girls-tutorial">crowdin.com</a> или в <a href="https://github.com/DjangoGirls/tutorial/issues/new">issue tracker</a> репозитория руководства на Github! Я также всегда открыт для приема замечаний о переводе.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2014/12/13/tidyr-how-to/" class="u-url">tidyr HOW-TO</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2014/12/13/tidyr-how-to/" rel="bookmark"><time class="published dt-published" datetime="2014-12-13T00:00:00+03:00" title="2014-12-13 00:00">2014-12-13 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Шпаргалка возможностей пакета <code>tidyr</code>. </p>
<h2>Содержание</h2>
<ol>
<li><a href="posts/2014/12/13/tidyr-how-to/#expand">expand</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#extract">extract</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#extract_numeric">extract_numeric</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#gather">gather</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#separate">separate</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#seq_range">seq_range</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#spread">spread</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#unite">unite</a></li>
<li><a href="posts/2014/12/13/tidyr-how-to/#unnest">unnest</a></li>
</ol>
<h2>Общее</h2>
<p>Пакет <code>tidyr</code> за авторством Hadley Wickham'а предназначен для первичной обработки сырых данных, в частности - изменения их структуры. Для начала нам потребуются сам <code>tidyr</code>, а также <code>dplyr</code>:</p>
<pre class="code literal-block"><span></span><span class="kn">library</span><span class="p">(</span>tidyr<span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>dplyr<span class="p">)</span>
</pre>


<p><a name="expand"></a></p>
<h2>expand()</h2>
<h3>Назначение</h3>
<p>Создает <code>data.frame</code> включающий все комбинации заданных переменных без перестановок</p>
<h3>Использование</h3>
<p><code>expand(data, ...)</code></p>
<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - оригинальный <code>data.frame</code>
</li>
<li>
<code>...</code> - имена переменных для комбинации (допустимы выражения вместо непосредственно имен)</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>a <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> b <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">),</span> <span class="kt">c</span> <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">))</span>
df
</pre>


<pre class="code literal-block"><span></span>##   a b c
## 1 1 3 1
## 2 2 5 2
## 3 5 3 3
</pre>


<p>Все комбинации переменных <code>vs</code> и <code>cyl</code>:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>mtcars<span class="p">,</span> vs<span class="p">,</span> cyl<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   vs cyl
## 1  0   4
## 2  0   6
## 3  0   8
## 4  1   4
## 5  1   6
## 6  1   8
</pre>


<p>Все комбинации переменных <code>cyl</code> и <code>mpg</code>, последняя при этом принимает только минимальное или максимальное значение:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>mtcars<span class="p">,</span> cyl<span class="p">,</span> mpg <span class="o">=</span> seq_range<span class="p">(</span>mpg<span class="p">,</span> <span class="m">2</span><span class="p">))</span>
</pre>


<pre class="code literal-block"><span></span>##   cyl  mpg
## 1   4 10.4
## 2   4 33.9
## 3   6 10.4
## 4   6 33.9
## 5   8 10.4
## 6   8 33.9
</pre>


<p>Все комбинации переменных <code>cyl</code> и <code>mpg</code>, последняя при этом принимает значения из разбитого на 5 равных частей диапазона:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>mtcars<span class="p">,</span> cyl<span class="p">,</span> mpg <span class="o">=</span> seq_range<span class="p">(</span>mpg<span class="p">,</span> <span class="m">5</span><span class="p">))</span>
</pre>


<pre class="code literal-block"><span></span>##    cyl    mpg
## 1    4 10.400
## 2    4 16.275
## 3    4 22.150
## 4    4 28.025
## 5    4 33.900
## 6    6 10.400
## 7    6 16.275
## 8    6 22.150
## 9    6 28.025
## 10   6 33.900
## 11   8 10.400
## 12   8 16.275
## 13   8 22.150
## 14   8 28.025
## 15   8 33.900
</pre>


<p>Все комбинации переменных <code>a</code>, <code>b</code> и <code>c</code>:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>df<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##    a b c
## 1  1 3 1
## 2  1 3 2
## 3  1 3 3
## 4  1 5 1
## 5  1 5 2
## 6  1 5 3
## 7  2 3 1
## 8  2 3 2
## 9  2 3 3
## 10 2 5 1
## 11 2 5 2
## 12 2 5 3
## 13 5 3 1
## 14 5 3 2
## 15 5 3 3
## 16 5 5 1
## 17 5 5 2
## 18 5 5 3
</pre>


<p>Все комбинации переменных <code>a</code> и <code>b</code>:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>df<span class="p">,</span> a<span class="p">,</span> b<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   a b
## 1 1 3
## 2 1 5
## 3 2 3
## 4 2 5
## 5 5 3
## 6 5 5
</pre>


<p>Все комбинации переменных <code>a</code> и <code>c</code>:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>df<span class="p">,</span> a<span class="p">,</span> <span class="kt">c</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   a c
## 1 1 1
## 2 1 2
## 3 1 3
## 4 2 1
## 5 2 2
## 6 2 3
## 7 5 1
## 8 5 2
## 9 5 3
</pre>


<p>Все комбинации переменных <code>b</code> и <code>c</code>:</p>
<pre class="code literal-block"><span></span>expand<span class="p">(</span>df<span class="p">,</span> b<span class="p">,</span> <span class="kt">c</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   b c
## 1 3 1
## 2 3 2
## 3 3 3
## 4 5 1
## 5 5 2
## 6 5 3
</pre>


<p><a name="extract"></a></p>
<h2>extract()</h2>
<h3>Назначение</h3>
<p>Применяет регулярное выражение к переменной и создает одну или несколько новых на основе результата</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>extract(data, col, into, regex = "([[:alnum:]]+)", remove = TRUE,
        convert = FALSE, ...)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - оригинальный <code>data.frame</code>
</li>
<li>
<code>col</code> - имя переменной</li>
<li>
<code>into</code> - имена новых переменных</li>
<li>
<code>regex</code> - регулярное выражение для поиска требуемых данных</li>
<li>
<code>remove</code> - если <code>TRUE</code> - удаляет <code>col</code> из результирующего <code>data.frame</code>
</li>
<li>
<code>convert</code> - если <code>TRUE</code> - применяет <code>type.convert</code> c <code>as.is = TRUE</code> к новым переменным</li>
<li>
<code>...</code> - дополнительные аргументы для <code>regexec</code>
</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a.b"</span><span class="p">,</span> <span class="s">"a.d"</span><span class="p">,</span> <span class="s">"b.c"</span><span class="p">))</span>
df
</pre>


<pre class="code literal-block"><span></span>##     x
## 1 a.b
## 2 a.d
## 3 b.c
</pre>


<p>Извлечь из переменной <code>x</code> первую букву:</p>
<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span> extract<span class="p">(</span>x<span class="p">,</span> <span class="s">"A"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   A
## 1 a
## 2 a
## 3 b
</pre>


<p>Разбить переменную <code>x</code>:</p>
<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span> extract<span class="p">(</span>x<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">),</span> <span class="s">"([[:alnum:]]+)\\.([[:alnum:]]+)"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   A B
## 1 a b
## 2 a d
## 3 b c
</pre>


<p><a name="extract_numeric"></a></p>
<h2>extract_numeric()</h2>
<h3>Назначение</h3>
<p>Используя регулярное выражение удаляет все нецифровые знаки из строки и трансформирует результат в число</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>extract_numeric(x)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>x</code> - <code>character vector</code> или <code>factor</code>
</li>
</ul>
<h3>Примеры использования</h3>
<pre class="code literal-block"><span></span>extract_numeric<span class="p">(</span><span class="s">"$1,200.34"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## [1] 1200.34
</pre>


<pre class="code literal-block"><span></span>extract_numeric<span class="p">(</span><span class="s">"-2%"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## [1] -2
</pre>


<p>Может некорректно работать со строками, которые точно не являются цифровыми данными:</p>
<pre class="code literal-block"><span></span>extract_numeric<span class="p">(</span><span class="s">"-2-2"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## Warning in extract_numeric("-2-2"): NAs introduced by coercion
</pre>


<pre class="code literal-block"><span></span>## [1] NA
</pre>


<pre class="code literal-block"><span></span>extract_numeric<span class="p">(</span><span class="s">"12abc34"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## [1] 1234
</pre>


<p><a name="gather"></a></p>
<h2>gather()</h2>
<h3>Назначение</h3>
<p>Объединяет переменные, имена переменных для объединения становятся уровнями переменной <code>key</code>, значения объединенных переменных заполняют соответственно переменную <code>value</code></p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>gather(data, key, value, ..., na.rm = FALSE, convert = FALSE)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - оригинальный <code>data.frame</code>
</li>
<li>
<code>key</code>, <code>value</code> - <code>key</code>, <code>value</code> переменные</li>
<li>
<code>...</code> - переменные для объединения, выбор нескольких: <code>x:z</code>, исключить: <code>-y</code>
</li>
<li>
<code>na.rm</code> - если <code>TRUE</code> - удалить все <code>NA</code>
</li>
<li>
<code>convert</code> - если <code>TRUE</code> - применяет <code>type.convert</code> к <code>key</code> переменной</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>stocks <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>
time <span class="o">=</span> <span class="kp">as.Date</span><span class="p">(</span><span class="s">'2009-01-01'</span><span class="p">)</span> <span class="o">+</span> <span class="m">0</span><span class="o">:</span><span class="m">9</span><span class="p">,</span>
X <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span>
Y <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span>
Z <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="p">)</span>
stocks
</pre>


<pre class="code literal-block"><span></span>##          time          X          Y           Z
## 1  2009-01-01  0.7722318 -0.3642657 -2.50084998
## 2  2009-01-02 -1.1323590  0.7835050 -1.44378404
## 3  2009-01-03 -0.8616668 -2.5209075  2.19735867
## 4  2009-01-04 -0.6363773 -3.6459329 -2.27906230
## 5  2009-01-05  1.3777546  0.6740792  2.47886088
## 6  2009-01-06  1.1138555 -2.7431003  2.13743541
## 7  2009-01-07 -0.4055423 -0.3971725  0.32445108
## 8  2009-01-08 -0.6551642 -1.3071296 -4.39142177
## 9  2009-01-09 -0.8421454 -0.9334135 -0.02401832
## 10 2009-01-10 -0.1655489 -0.6961085 -0.82861047
</pre>


<p>Объединить имена переменных <code>X</code>, <code>Y</code>, <code>Z</code> в качестве уровней новой переменной <code>stock</code>, значения объединенных переменных заполнят переменную <code>price</code>:</p>
<pre class="code literal-block"><span></span>stocks <span class="o">%&gt;%</span> gather<span class="p">(</span>stock<span class="p">,</span> price<span class="p">,</span> <span class="o">-</span>time<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##          time stock       price
## 1  2009-01-01     X  0.77223178
## 2  2009-01-02     X -1.13235898
## 3  2009-01-03     X -0.86166677
## 4  2009-01-04     X -0.63637728
## 5  2009-01-05     X  1.37775462
## 6  2009-01-06     X  1.11385552
## 7  2009-01-07     X -0.40554232
## 8  2009-01-08     X -0.65516418
## 9  2009-01-09     X -0.84214541
## 10 2009-01-10     X -0.16554890
## 11 2009-01-01     Y -0.36426573
## 12 2009-01-02     Y  0.78350495
## 13 2009-01-03     Y -2.52090748
## 14 2009-01-04     Y -3.64593285
## 15 2009-01-05     Y  0.67407924
## 16 2009-01-06     Y -2.74310035
## 17 2009-01-07     Y -0.39717249
## 18 2009-01-08     Y -1.30712963
## 19 2009-01-09     Y -0.93341350
## 20 2009-01-10     Y -0.69610847
## 21 2009-01-01     Z -2.50084998
## 22 2009-01-02     Z -1.44378404
## 23 2009-01-03     Z  2.19735867
## 24 2009-01-04     Z -2.27906230
## 25 2009-01-05     Z  2.47886088
## 26 2009-01-06     Z  2.13743541
## 27 2009-01-07     Z  0.32445108
## 28 2009-01-08     Z -4.39142177
## 29 2009-01-09     Z -0.02401832
## 30 2009-01-10     Z -0.82861047
</pre>


<p><a name="separate"></a></p>
<h2>separate()</h2>
<h3>Назначение</h3>
<p>Разбивает переменную на несколько</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>separate(data, col, into, sep = "[^[:alnum:]]+", remove = TRUE,
         convert = FALSE, extra = "error", ...)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - оригинальный <code>data.frame</code>
</li>
<li>
<code>col</code> - имя переменной для разбивки</li>
<li>
<code>into</code> - имена новых переменных</li>
<li>
<code>sep</code> - разделитель, если <code>character</code> - воспринимается как регулярное выражение, по-умолчанию - последовательность не цифро-буквенных знаков, если <code>numeric</code> - воспринимается как позиция для разделения</li>
<li>
<code>remove</code> - если <code>TRUE</code> - удаляет <code>col</code> из результирующего <code>data.frame</code>
</li>
<li>
<code>convert</code> - если <code>TRUE</code> - применяет <code>type.convert</code> c <code>as.is = TRUE</code> к новым переменным</li>
<li>
<code>extra</code> - если <code>sep</code> - <code>character</code>, то аргумент задает реакцию на превышение допустимого числа новых переменных (<code>into</code>):<ul>
<li>
<code>error</code> - ошибка по-умолчанию</li>
<li>
<code>drop</code> - возвращает <code>length(into)</code>, отбрасывает все сверху или расширяет <code>data.frame</code>
</li>
<li>
<code>merge</code> - разделяет только <code>length(into)</code> раз</li>
</ul>
</li>
<li>
<code>...</code> - дополнительные переменные для <code>strsplit</code>
</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a.b"</span><span class="p">,</span> <span class="s">"a.d"</span><span class="p">,</span> <span class="s">"b.c"</span><span class="p">))</span>
df
</pre>


<pre class="code literal-block"><span></span>##     x
## 1 a.b
## 2 a.d
## 3 b.c
</pre>


<p>Разбить переменную <code>x</code> на две, разделитель - <code>.</code>:</p>
<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span> separate<span class="p">(</span>x<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">))</span>
</pre>


<pre class="code literal-block"><span></span>##   A B
## 1 a b
## 2 a d
## 3 b c
</pre>


<p>Если строки нельзя разделить на равное число переменных:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"a b"</span><span class="p">,</span> <span class="s">"a b c"</span><span class="p">))</span>
df <span class="o">%&gt;%</span> separate<span class="p">(</span>x<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">),</span> extra <span class="o">=</span> <span class="s">"merge"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   a    b
## 1 a &lt;NA&gt;
## 2 a    b
## 3 a  b c
</pre>


<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span> separate<span class="p">(</span>x<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">),</span> extra <span class="o">=</span> <span class="s">"drop"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   a    b
## 1 a &lt;NA&gt;
## 2 a    b
## 3 a    b
</pre>


<p>Данные:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"x: 123"</span><span class="p">,</span> <span class="s">"y: error: 7"</span><span class="p">))</span>
df
</pre>


<pre class="code literal-block"><span></span>##             x
## 1      x: 123
## 2 y: error: 7
</pre>


<p>Разбить строки строго на две переменные по первому включению <code>sep</code>:</p>
<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span> separate<span class="p">(</span>x<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"key"</span><span class="p">,</span> <span class="s">"value"</span><span class="p">),</span> <span class="s">": "</span><span class="p">,</span> extra <span class="o">=</span> <span class="s">"merge"</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   key    value
## 1   x      123
## 2   y error: 7
</pre>


<p><a name="seq_range"></a></p>
<h2>seq_range()</h2>
<h3>Назначение</h3>
<p>Возвращает вектор из <code>n</code> значений <code>x</code> от минимального до максимального с равными промежутками</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>seq_range(x, n)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>x</code> - <code>numeric vector</code>
</li>
<li>
<code>n</code> - число значений</li>
</ul>
<h3>Примеры использования</h3>
<p>Разобьем диапазон значений вектора <code>1:100</code>: </p>
<pre class="code literal-block"><span></span>seq_range<span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## [1]   1.00  25.75  50.50  75.25 100.00
</pre>


<p><a name="spread"></a></p>
<h2>spread()</h2>
<h3>Назначение</h3>
<p>Переформатирует <code>data.frame</code> - используя в качестве имен новых переменных уровни заданной переменной <code>key</code>, а в качестве значений - соответствующие значения переменной <code>value</code>.</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>spread(data, key, value, fill = NA, convert = FALSE, drop = TRUE)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - <code>numeric vector</code>
</li>
<li>
<code>key</code> - переменная, чьи уровни станут новыми переменными</li>
<li>
<code>value</code> - переменная, соответствующими значениями которой будут заполнены новые столбцы</li>
<li>
<code>fill</code> - если для комбинации переменной <code>key</code> и других переменных нет значения - подставляет на его место указанное </li>
<li>
<code>convert</code> - если <code>TRUE</code> - применяет <code>type.convert</code> c <code>as.is = TRUE</code> к новым переменным</li>
<li>
<code>drop</code> - если <code>FALSE</code> - сохранить уровни факторов, для которых нет значений в данных, заполняя их по правилу <code>fill</code>
</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>stocks <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>
time <span class="o">=</span> <span class="kp">as.Date</span><span class="p">(</span><span class="s">'2009-01-01'</span><span class="p">)</span> <span class="o">+</span> <span class="m">0</span><span class="o">:</span><span class="m">9</span><span class="p">,</span>
X <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span>
Y <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span>
Z <span class="o">=</span> rnorm<span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<span class="p">)</span>
stocks
</pre>


<pre class="code literal-block"><span></span>##          time          X          Y          Z
## 1  2009-01-01  0.3911387  2.0635862 -6.3953715
## 2  2009-01-02  0.1203100 -1.3411346 -4.5907582
## 3  2009-01-03 -0.3916139 -0.3763128 -0.6275635
## 4  2009-01-04 -0.2890859  1.0035137 -2.9846424
## 5  2009-01-05  0.2296824  1.0974012  0.6136485
## 6  2009-01-06  0.0278537  4.9167183 -5.7563632
## 7  2009-01-07  0.7349981  0.4856101 -6.7558963
## 8  2009-01-08 -0.5096926 -0.8247462  2.5661235
## 9  2009-01-09  0.2338707 -0.5513422 -0.6923370
## 10 2009-01-10  2.3231925  0.2870178  1.7580478
</pre>


<p>Противоположность <code>gather</code>:</p>
<pre class="code literal-block"><span></span>stocksm <span class="o">&lt;-</span> stocks <span class="o">%&gt;%</span> gather<span class="p">(</span>stock<span class="p">,</span> price<span class="p">,</span> <span class="o">-</span>time<span class="p">)</span>
<span class="kp">head</span><span class="p">(</span>stocksm<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##         time stock      price
## 1 2009-01-01     X  0.3911387
## 2 2009-01-02     X  0.1203100
## 3 2009-01-03     X -0.3916139
## 4 2009-01-04     X -0.2890859
## 5 2009-01-05     X  0.2296824
## 6 2009-01-06     X  0.0278537
</pre>


<pre class="code literal-block"><span></span>stocksm <span class="o">%&gt;%</span> spread<span class="p">(</span>stock<span class="p">,</span> price<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##          time          X          Y          Z
## 1  2009-01-01  0.3911387  2.0635862 -6.3953715
## 2  2009-01-02  0.1203100 -1.3411346 -4.5907582
## 3  2009-01-03 -0.3916139 -0.3763128 -0.6275635
## 4  2009-01-04 -0.2890859  1.0035137 -2.9846424
## 5  2009-01-05  0.2296824  1.0974012  0.6136485
## 6  2009-01-06  0.0278537  4.9167183 -5.7563632
## 7  2009-01-07  0.7349981  0.4856101 -6.7558963
## 8  2009-01-08 -0.5096926 -0.8247462  2.5661235
## 9  2009-01-09  0.2338707 -0.5513422 -0.6923370
## 10 2009-01-10  2.3231925  0.2870178  1.7580478
</pre>


<p>Разбить <code>price</code> по переменной <code>time</code>:</p>
<pre class="code literal-block"><span></span>stocksm <span class="o">%&gt;%</span> spread<span class="p">(</span>time<span class="p">,</span> price<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   stock 2009-01-01 2009-01-02 2009-01-03 2009-01-04 2009-01-05 2009-01-06
## 1     X  0.3911387   0.120310 -0.3916139 -0.2890859  0.2296824  0.0278537
## 2     Y  2.0635862  -1.341135 -0.3763128  1.0035137  1.0974012  4.9167183
## 3     Z -6.3953715  -4.590758 -0.6275635 -2.9846424  0.6136485 -5.7563632
##   2009-01-07 2009-01-08 2009-01-09 2009-01-10
## 1  0.7349981 -0.5096926  0.2338707  2.3231925
## 2  0.4856101 -0.8247462 -0.5513422  0.2870178
## 3 -6.7558963  2.5661235 -0.6923370  1.7580478
</pre>


<p><a name="unite"></a></p>
<h2>unite()</h2>
<h3>Назначение</h3>
<p>Объединяет переменные в одну</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>unite(data, col, ..., sep = "_", remove = TRUE)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - <code>numeric vector</code>
</li>
<li>
<code>col</code> - имя базовой переменной</li>
<li>
<code>...</code> - переменные для объединения с базовой</li>
<li>
<code>sep</code> - разделитель между значениями объединенных переменных </li>
<li>
<code>remove</code> - если <code>TRUE</code> - удаляет переменные для объединения</li>
</ul>
<h3>Примеры использования</h3>
<p>Объединяем переменные <code>vs</code> и <code>am</code> в одну:</p>
<pre class="code literal-block"><span></span>mtcars <span class="o">%&gt;%</span>
  unite_<span class="p">(</span><span class="s">"vs_am"</span><span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"vs"</span><span class="p">,</span> <span class="s">"am"</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="kp">head</span><span class="p">()</span>
</pre>


<pre class="code literal-block"><span></span>##                    mpg cyl disp  hp drat    wt  qsec vs_am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46   0_1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02   0_1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61   1_1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44   1_0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02   0_0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22   1_0    3    1
</pre>


<p>Противоположность <code>separate</code>:</p>
<pre class="code literal-block"><span></span>mtcars <span class="o">%&gt;%</span>
  unite<span class="p">(</span>vs_am<span class="p">,</span> vs<span class="p">,</span> am<span class="p">)</span> <span class="o">%&gt;%</span>
  separate<span class="p">(</span>vs_am<span class="p">,</span> <span class="kt">c</span><span class="p">(</span><span class="s">"vs"</span><span class="p">,</span> <span class="s">"am"</span><span class="p">))</span> <span class="o">%&gt;%</span>
  <span class="kp">head</span><span class="p">()</span>
</pre>


<pre class="code literal-block"><span></span>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
</pre>


<p><a name="unnest"></a></p>
<h2>unnest()</h2>
<h3>Назначение</h3>
<p>Разбивает переменную на большее число строк за счет раскрытия вложенных элементов</p>
<h3>Использование</h3>
<pre class="code literal-block"><span></span>unnest(data, col = NULL)
</pre>


<h3>Аргументы</h3>
<ul>
<li>
<code>data</code> - оригинальный <code>data.frame</code>
</li>
<li>
<code>col</code> - переменная, которую нужно разбить на большее число строк</li>
</ul>
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code literal-block"><span></span>df <span class="o">&lt;-</span> <span class="kt">data.frame</span><span class="p">(</span>
x <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span>
y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"d,e,f"</span><span class="p">,</span> <span class="s">"g,h"</span><span class="p">),</span>
stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span>
<span class="p">)</span>
df
</pre>


<pre class="code literal-block"><span></span>##   x     y
## 1 1     a
## 2 2 d,e,f
## 3 3   g,h
</pre>


<p>Разбить переменную <code>y</code> на большее число строк:</p>
<pre class="code literal-block"><span></span>df <span class="o">%&gt;%</span>
  <span class="kp">transform</span><span class="p">(</span>y <span class="o">=</span> <span class="kp">strsplit</span><span class="p">(</span>y<span class="p">,</span> <span class="s">","</span><span class="p">))</span> <span class="o">%&gt;%</span>
  unnest<span class="p">(</span>y<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   x y
## 1 1 a
## 2 2 d
## 3 2 e
## 4 2 f
## 5 3 g
## 6 3 h
</pre>


<p>Разобьем стандартный набор данных <code>iris</code> по виду цветка:</p>
<pre class="code literal-block"><span></span>my_list <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span><span class="kp">split</span><span class="p">(</span><span class="kp">subset</span><span class="p">(</span>iris<span class="p">,</span> select <span class="o">=</span> <span class="o">-</span>Species<span class="p">),</span>iris<span class="o">$</span>Species<span class="p">),</span>
                  <span class="s">"["</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="p">)</span>
my_list
</pre>


<pre class="code literal-block"><span></span>## $setosa
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          5.1         3.5          1.4         0.2
## 2          4.9         3.0          1.4         0.2
## 
## $versicolor
##    Sepal.Length Sepal.Width Petal.Length Petal.Width
## 51          7.0         3.2          4.7         1.4
## 52          6.4         3.2          4.5         1.5
## 
## $virginica
##     Sepal.Length Sepal.Width Petal.Length Petal.Width
## 101          6.3         3.3          6.0         2.5
## 102          5.8         2.7          5.1         1.9
</pre>


<p>Соберем список обратно в <code>data.frame</code>:</p>
<pre class="code literal-block"><span></span>unnest<span class="p">(</span>my_list<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## Source: local data frame [6 x 4]
## 
##   Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1          5.1         3.5          1.4         0.2
## 2          4.9         3.0          1.4         0.2
## 3          7.0         3.2          4.7         1.4
## 4          6.4         3.2          4.5         1.5
## 5          6.3         3.3          6.0         2.5
## 6          5.8         2.7          5.1         1.9
</pre>


<p>Добавим потерявшуюся переменную <code>Species</code>:</p>
<pre class="code literal-block"><span></span>unnest<span class="p">(</span>my_list<span class="p">,</span> Species<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     setosa          5.1         3.5          1.4         0.2
## 2     setosa          4.9         3.0          1.4         0.2
## 3 versicolor          7.0         3.2          4.7         1.4
## 4 versicolor          6.4         3.2          4.5         1.5
## 5  virginica          6.3         3.3          6.0         2.5
## 6  virginica          5.8         2.7          5.1         1.9
</pre>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2014/11/03/mosaic-plot/" class="u-url">Мозаичные диаграммы в ggplot2</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2014/11/03/mosaic-plot/" rel="bookmark"><time class="published dt-published" datetime="2014-11-03T00:00:00+03:00" title="2014-11-03 00:00">2014-11-03 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>Сегодня на повестке дня мозаичные диаграммы в <strong>R</strong> при помощи <code>ggplot2</code>. И,
да, в <code>ggplot2</code> нет их реализации "из коробки", но с должным умением и
достаточно большой кувалдой дело можно поправить.</p>
<p>В процессе поиска подходящей реализации (идей) мне попалось несколько вариантов
построения мозаичной диаграммы в <code>ggplot2</code>, лучшей из всех, на мой вззгляд,
является реализация пользователя <a href="http://stackoverflow.com/a/19258045" title="Edwin's answer">Edwin</a> со stackoverflow с дополнениями из
блога <a href="http://learnr.wordpress.com/2009/03/29/ggplot2_marimekko_mosaic_chart/">Learning R</a>. Если будете изучать способ из блога - учтите что
рекомендации несколько устарели (<code>ddply</code>, <code>opts</code>, <code>theme_line</code>) и автор забыл
упомянуть о (<code>library(reshape2)</code> и <code>library(plyr)</code>).</p>
<p>Нам потребуется только <code>ggplot2</code>:</p>
<pre class="code literal-block"><span></span><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>## Loading required package: methods
</pre>


<p>Для примера будем использовать массив данных о бриллиантах, он идет в комплекте
с <code>ggplot2</code>:</p>
<pre class="code literal-block"><span></span><span class="kp">head</span><span class="p">(</span>diamonds<span class="p">)</span>
</pre>


<pre class="code literal-block"><span></span>##   carat       cut color clarity depth table price    x    y    z
## 1  0.23     Ideal     E     SI2  61.5    55   326 3.95 3.98 2.43
## 2  0.21   Premium     E     SI1  59.8    61   326 3.89 3.84 2.31
## 3  0.23      Good     E     VS1  56.9    65   327 4.05 4.07 2.31
## 4  0.29   Premium     I     VS2  62.4    58   334 4.20 4.23 2.63
## 5  0.31      Good     J     SI2  63.3    58   335 4.34 4.35 2.75
## 6  0.24 Very Good     J    VVS2  62.8    57   336 3.94 3.96 2.48
</pre>


<p>Мозаичную диаграмму мы будем строить через вспомогательную функцию <code>ggMMplot</code>,
которая будет принимать две дискретные переменные:</p>
<pre class="code literal-block"><span></span>ggMMplot <span class="o">&lt;-</span> <span class="kr">function</span><span class="p">(</span>var1<span class="p">,</span> var2<span class="p">){</span>
  <span class="c1"># ggplot2 должен быть загружен</span>
  <span class="kn">require</span><span class="p">(</span>ggplot2<span class="p">)</span>

  <span class="c1"># Подсчитываем диапазон значений дискретных переменных</span>
  levVar1 <span class="o">&lt;-</span> <span class="kp">length</span><span class="p">(</span><span class="kp">levels</span><span class="p">(</span>var1<span class="p">))</span>
  levVar2 <span class="o">&lt;-</span> <span class="kp">length</span><span class="p">(</span><span class="kp">levels</span><span class="p">(</span>var2<span class="p">))</span>

  <span class="c1"># Строим таблицу вероятностей</span>
  jointTable <span class="o">&lt;-</span> <span class="kp">prop.table</span><span class="p">(</span><span class="kp">table</span><span class="p">(</span>var1<span class="p">,</span> var2<span class="p">))</span>

  <span class="c1"># Начинаем собирать data.frame, который будет использован для построения</span>
  <span class="c1"># диаграммы, для начала добавим в него сконвертированную таблицу вероятностей</span>
  plotData <span class="o">&lt;-</span> <span class="kp">as.data.frame</span><span class="p">(</span>jointTable<span class="p">)</span>

  <span class="c1"># Добавляем в data.frame информацию о ширине каждого из столбцов</span>
  plotData<span class="o">$</span>marginVar1 <span class="o">&lt;-</span> <span class="kp">prop.table</span><span class="p">(</span><span class="kp">table</span><span class="p">(</span>var1<span class="p">))</span>

  <span class="c1"># Добавляем в data.frame информацию о высоте каждой секции столбца</span>
  plotData<span class="o">$</span>var2Height <span class="o">&lt;-</span> plotData<span class="o">$</span>Freq <span class="o">/</span> plotData<span class="o">$</span>marginVar1

  <span class="c1"># Добавляем в data.frame информацию о положении центра каждого столбца</span>
  plotData<span class="o">$</span>var1Center <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="kp">cumsum</span><span class="p">(</span>plotData<span class="o">$</span>marginVar1<span class="p">)[</span><span class="m">1</span><span class="o">:</span>levVar1 <span class="o">-</span> <span class="m">1</span><span class="p">])</span> <span class="o">+</span>
    plotData<span class="o">$</span>marginVar1 <span class="o">/</span> <span class="m">2</span>

  <span class="c1"># Строим диаграмму</span>
  ggplot<span class="p">(</span>plotData<span class="p">,</span> aes<span class="p">(</span>var1Center<span class="p">,</span> var2Height<span class="p">))</span> <span class="o">+</span>
    geom_bar<span class="p">(</span>stat <span class="o">=</span> <span class="s">"identity"</span><span class="p">,</span> aes<span class="p">(</span>width <span class="o">=</span> marginVar1<span class="p">,</span> fill <span class="o">=</span> var2<span class="p">),</span>
             col <span class="o">=</span> <span class="s">"black"</span><span class="p">)</span> <span class="o">+</span>

    <span class="c1"># Подписи над столбцами</span>
    geom_text<span class="p">(</span>aes<span class="p">(</span>label <span class="o">=</span> <span class="kp">as.character</span><span class="p">(</span>var1<span class="p">),</span> x <span class="o">=</span> var1Center<span class="p">,</span>
                 y <span class="o">=</span> <span class="m">1.05</span><span class="p">),</span> size <span class="o">=</span> <span class="m">3</span><span class="p">,</span> color <span class="o">=</span> <span class="s">"black"</span><span class="p">)</span> <span class="o">+</span>

    <span class="c1"># Изменяем название легенды и меняем цветовую схему</span>
    scale_fill_brewer<span class="p">(</span>name<span class="o">=</span><span class="s">"Clarity"</span><span class="p">,</span> palette <span class="o">=</span> <span class="s">"Set2"</span><span class="p">)</span> <span class="o">+</span>

    <span class="c1"># Черно-белая тема для окружения</span>
    theme_bw<span class="p">()</span> <span class="o">+</span>

    <span class="c1"># Убираем названия осей</span>
    labs<span class="p">(</span>x <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> y <span class="o">=</span> <span class="kc">NULL</span><span class="p">,</span> fill <span class="o">=</span> <span class="kc">NULL</span><span class="p">)</span> <span class="o">+</span>

    <span class="c1"># Сетка на фоне не нужна</span>
    theme<span class="p">(</span>panel.grid.major <span class="o">=</span> element_line<span class="p">(</span>colour <span class="o">=</span> <span class="kc">NA</span><span class="p">),</span>
          panel.grid.minor <span class="o">=</span> element_line<span class="p">(</span>colour <span class="o">=</span> <span class="kc">NA</span><span class="p">))</span>

  <span class="p">}</span>

<span class="c1"># Строим мозаичную диаграмму, переменные: качество огранки vs. чистота</span>
ggMMplot<span class="p">(</span>diamonds<span class="o">$</span><span class="kp">cut</span><span class="p">,</span> diamonds<span class="o">$</span>clarity<span class="p">)</span>
</pre>


<p><img alt="center" src="images/2014/11/03/mosaic-plot/unnamed-chunk-1-1.png"></p>
<p>Что почитать еще? Из всех источников, что мне попались в процессе поиска, я
могу посоветовать взглянуть на пост из <a href="http://is-r.tumblr.com/post/33290921643/simple-marimekko-mosaic-plots">блога</a>, который ведут
Christopher DeSante и David Sparks (Университет Дьюка). Если вы
хотите разместить на диаграмме больше текста - изучите подробнее пост в
<a href="http://learnr.wordpress.com/2009/03/29/ggplot2_marimekko_mosaic_chart/">Learning R</a>.</p>
</div>
    </div>
    </article><article class="h-entry post-text"><header><h1 class="p-name entry-title"><a href="posts/2014/10/19/marginal-plots/" class="u-url">Диаграмма рассеяния с коробчатыми диаграммами по периметру</a></h1>
        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                Pavel Karateev
            </span></p>
            <p class="dateline"><a href="posts/2014/10/19/marginal-plots/" rel="bookmark"><time class="published dt-published" datetime="2014-10-19T00:00:00+03:00" title="2014-10-19 00:00">2014-10-19 00:00</time></a></p>
        </div>
    </header><div class="e-content entry-content">
    <div>
<p>В последнее время при работе с R и RStudio мне с изрядной периодичностью
приходится пользоваться коробчатыми диаграммами совместно с диаграммами
рассеяния, к сожалению, в <tt class="docutils literal">ggplot2</tt> не существует (или я её еще не нашел)
простой возможности удобного совместного расположения диаграмм таким образом,
чтобы учитывались границы, интервалы и поля.</p>
<p>После изучения ряда инструкций по реализации требуемого функционала, я пришел к
выводу что способ <a class="reference external" href="https://www.blogger.com/profile/02889896298552826810">Sandy Muspratt</a>, опубликованный в его <a class="reference external" href="http://sandymuspratt.blogspot.ru/2013/02/scatterplot-with-marginal-boxplots.html">блоге</a>,
является лучшим решением с точки зрения простоты и изящества.</p>
<p>Ниже представлен пример реализации, оригинал можно найти в блоге Сэнди.</p>
<p>Ссылки:</p>
<ul class="simple">
<li><a class="reference external" href="http://sandymuspratt.blogspot.ru/2013/02/scatterplot-with-marginal-boxplots.html">Sandy Muspratt's blog post</a></li>
<li><a class="reference external" href="http://docs.ggplot2.org/0.9.3.1/geom_boxplot.html">ggplot2 boxplot docs</a></li>
</ul>
<div class="section" id="id1">
<h2>Пакеты</h2>
<p>Помимо <tt class="docutils literal">ggplot2</tt> для корректного расположения диаграмм в строгом порядке
пригодятся пакеты <tt class="docutils literal">grid</tt> и <tt class="docutils literal">gtable</tt>.</p>
<pre class="code r"><a name="rest_code_077688382a7d45e4b64f5dce1c97565c-1"></a><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_02a2d3a7cd2b4216bc0369170e7d4172-1"></a>## Loading required package: methods
</pre>
<pre class="code r"><a name="rest_code_ee4513ead3044522a8dae99597f4ec9d-1"></a><span class="kn">library</span><span class="p">(</span>grid<span class="p">)</span>
<a name="rest_code_ee4513ead3044522a8dae99597f4ec9d-2"></a><span class="kn">library</span><span class="p">(</span>gtable<span class="p">)</span>
</pre>
</div>
<div class="section" id="id2">
<h2>Данные</h2>
<p>В качестве примера возьмем предустановленный массив данных <tt class="docutils literal">mtcars</tt>.</p>
<pre class="code r"><a name="rest_code_292eaa60fa02421890b60adc825c1f0f-1"></a>data<span class="p">(</span>mtcars<span class="p">)</span>
</pre>
</div>
<div class="section" id="id3">
<h2>Диаграмма рассеяния</h2>
<p>Для начала построим диаграмму рассеяния, помимо стандартного взова <tt class="docutils literal">ggplot</tt> и
<tt class="docutils literal">geom_point()</tt> нам потребуется пересчитать отображаемые границы диапазона
данных. <tt class="docutils literal">ggplot2</tt> делает это по умолчанию с эстетической целью - точки данных
так не будут совпадать с осями, однако нам нужно настроить границы точно для
позиционирования коробочных диаграмм.</p>
<pre class="code r"><a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-1"></a>p1 <span class="o">&lt;-</span> ggplot<span class="p">(</span>mtcars<span class="p">,</span> aes<span class="p">(</span>mpg<span class="p">,</span> hp<span class="p">))</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-2"></a>  geom_point<span class="p">()</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-3"></a>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-4"></a>  <span class="c1"># Удаляем дополнительные поля к отображаемому диапазону данных</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-5"></a>  scale_x_continuous<span class="p">(</span>expand <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-6"></a>  scale_y_continuous<span class="p">(</span>expand <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-7"></a>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-8"></a>  <span class="c1"># Пересчитываем дополнительные поля</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-9"></a>  expand_limits<span class="p">(</span>y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kp">min</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)</span> <span class="o">-</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)),</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-10"></a>    <span class="kp">max</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)</span> <span class="o">+</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">))))</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-11"></a>  expand_limits<span class="p">(</span>x <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kp">min</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span> <span class="o">-</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)),</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-12"></a>    <span class="kp">max</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span> <span class="o">+</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">))))</span> <span class="o">+</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-13"></a>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-14"></a>  <span class="c1"># Настраиваем внешние границы</span>
<a name="rest_code_a97f7b1ac6d0498fb3844f2b35aad962-15"></a>  theme<span class="p">(</span>plot.margin <span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span> <span class="s">"lines"</span><span class="p">))</span>
</pre>
</div>
<div class="section" id="id4">
<h2>Коробчатые диаграммы</h2>
<p>Строим коробчатые диаграммы, при этом настраиваем внешние границы графиков и
границы отображаемого диапазона для соответствия диаграмме рассеяния.
Дополнительно удаляем оси коробчатых диаграмм - они нам не нужны.</p>
<pre class="code r"><a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-1"></a><span class="c1"># Создаем тему без названий осей и меток</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-2"></a>theme_remove_all <span class="o">&lt;-</span> theme<span class="p">(</span>axis.text <span class="o">=</span> element_blank<span class="p">(),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-3"></a>  axis.title <span class="o">=</span> element_blank<span class="p">(),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-4"></a>  axis.ticks <span class="o">=</span> element_blank<span class="p">(),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-5"></a>  axis.ticks.margin <span class="o">=</span> unit<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="s">"lines"</span><span class="p">),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-6"></a>  axis.ticks.length <span class="o">=</span> unit<span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="s">"cm"</span><span class="p">))</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-7"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-8"></a><span class="c1"># Горизонтальная коробчатая диаграмма</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-9"></a>p2 <span class="o">&lt;-</span> ggplot<span class="p">(</span>mtcars<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> y <span class="o">=</span> mpg<span class="p">))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-10"></a>  <span class="c1"># Строим границы (whiskers) коробчатой диаграммы</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-11"></a>  stat_boxplot<span class="p">(</span>geom <span class="o">=</span><span class="s">'errorbar'</span><span class="p">)</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-12"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-13"></a>  <span class="c1"># Сама диаграмма</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-14"></a>  geom_boxplot<span class="p">()</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-15"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-16"></a>  <span class="c1"># Удаляем дополнительные поля к отображаемому диапазону данных</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-17"></a>  scale_y_continuous<span class="p">(</span>expand <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-18"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-19"></a>  <span class="c1"># Пересчитываем дополнительные поля</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-20"></a>  expand_limits<span class="p">(</span>y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kp">min</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span> <span class="o">-</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-21"></a>                      <span class="kp">max</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">)</span> <span class="o">+</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>mpg<span class="p">))))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-22"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-23"></a>  <span class="c1"># Поворачиваем диаграмму (по умолчанию коробчатые диаграммы вертикальны)</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-24"></a>  coord_flip<span class="p">()</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-25"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-26"></a>  <span class="c1"># Применяем тему с удаленными осями</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-27"></a>  theme_remove_all <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-28"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-29"></a>  <span class="c1"># Изменяем внешние поля</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-30"></a>  theme<span class="p">(</span>plot.margin<span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span> <span class="s">"lines"</span><span class="p">))</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-31"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-32"></a><span class="c1"># Вертикальная коробчатая диаграмма</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-33"></a>p3 <span class="o">&lt;-</span> ggplot<span class="p">(</span>mtcars<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">factor</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> y <span class="o">=</span> hp<span class="p">))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-34"></a>  <span class="c1"># Строим границы (whiskers) коробчатой диаграммы</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-35"></a>  stat_boxplot<span class="p">(</span>geom <span class="o">=</span><span class="s">'errorbar'</span><span class="p">)</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-36"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-37"></a>  <span class="c1"># Сама диаграмма</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-38"></a>  geom_boxplot<span class="p">()</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-39"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-40"></a>  <span class="c1"># Удаляем дополнительные поля к отображаемому диапазону данных</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-41"></a>  scale_y_continuous<span class="p">(</span>expand <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-42"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-43"></a>  <span class="c1"># Пересчитываем дополнительные поля</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-44"></a>  expand_limits<span class="p">(</span>y <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="kp">min</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)</span> <span class="o">-</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)),</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-45"></a>                      <span class="kp">max</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">)</span> <span class="o">+</span> <span class="m">0.1</span> <span class="o">*</span> <span class="kp">diff</span><span class="p">(</span><span class="kp">range</span><span class="p">(</span>mtcars<span class="o">$</span>hp<span class="p">))))</span> <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-46"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-47"></a>  <span class="c1"># Применяем тему с удаленными осями</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-48"></a>  theme_remove_all <span class="o">+</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-49"></a>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-50"></a>  <span class="c1"># Изменяем внешние поля</span>
<a name="rest_code_479e238c1f944b3e833f42090e6f2c0b-51"></a>  theme<span class="p">(</span>plot.margin<span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> <span class="s">"lines"</span><span class="p">))</span>
</pre>
</div>
<div class="section" id="gtables">
<h2>gtables</h2>
<p>Создаем объекты <tt class="docutils literal">gtable</tt> с диаграммами для последующей верстки.</p>
<pre class="code text"><a name="rest_code_df17f08931364d82b107e530c278ba29-1"></a>gt1 &lt;- ggplot_gtable(ggplot_build(p1)) # Диаграмма рассеяния
<a name="rest_code_df17f08931364d82b107e530c278ba29-2"></a>gt2 &lt;- ggplot_gtable(ggplot_build(p2)) # Коробчатая горизонтальная диаграмма
<a name="rest_code_df17f08931364d82b107e530c278ba29-3"></a>gt3 &lt;- ggplot_gtable(ggplot_build(p3)) # Коробчатая вертикальная диаграмма
</pre>
</div>
<div class="section" id="id5">
<h2>Настройка высоты и ширины</h2>
<p>В <tt class="docutils literal">gtable</tt> хранится вся информация, необходимая для построения графиков, в том
числе и поля, выделяемые для отображения меток и названий осей. Нам нужно
перезадать ширину и высоту диаграмм, чтобы верхняя коробчатая диаграмма не
"налезала" на воображаемую ось Y диаграммы рассеяния, а коробчатая диаграмма
справа не пересекала ось X.</p>
<pre class="code r"><a name="rest_code_567fac0ac23d43968a636181bcb4fc69-1"></a><span class="c1"># Максимальная высота и ширина</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-2"></a>maxWidth <span class="o">&lt;-</span> unit.pmax<span class="p">(</span>gt1<span class="o">$</span>widths<span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">],</span> gt2<span class="o">$</span>widths<span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">])</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-3"></a>maxHeight <span class="o">&lt;-</span> unit.pmax<span class="p">(</span>gt1<span class="o">$</span>heights<span class="p">[</span><span class="m">4</span><span class="o">:</span><span class="m">5</span><span class="p">],</span> gt3<span class="o">$</span>heights<span class="p">[</span><span class="m">4</span><span class="o">:</span><span class="m">5</span><span class="p">])</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-4"></a>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-5"></a><span class="c1"># Задаем максимальные значения высоты и ширины в gtables для gt1, gt2 и gt3</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-6"></a>gt1<span class="o">$</span>widths<span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">as.list</span><span class="p">(</span>maxWidth<span class="p">)</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-7"></a>gt2<span class="o">$</span>widths<span class="p">[</span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">as.list</span><span class="p">(</span>maxWidth<span class="p">)</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-8"></a>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-9"></a>gt1<span class="o">$</span>heights<span class="p">[</span><span class="m">4</span><span class="o">:</span><span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">as.list</span><span class="p">(</span>maxHeight<span class="p">)</span>
<a name="rest_code_567fac0ac23d43968a636181bcb4fc69-10"></a>gt3<span class="o">$</span>heights<span class="p">[</span><span class="m">4</span><span class="o">:</span><span class="m">5</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="kp">as.list</span><span class="p">(</span>maxHeight<span class="p">)</span>
</pre>
</div>
<div class="section" id="id6">
<h2>Верстка</h2>
<pre class="code r"><a name="rest_code_fc5745a3fc4f42948f0434888e968fff-1"></a><span class="c1"># Создаем новую пустую gtable</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-2"></a>gt <span class="o">&lt;-</span> gtable<span class="p">(</span>widths <span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">7</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="s">"null"</span><span class="p">),</span> height <span class="o">=</span> unit<span class="p">(</span><span class="kt">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">7</span><span class="p">),</span> <span class="s">"null"</span><span class="p">))</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-3"></a>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-4"></a><span class="c1"># Вставляем gt1, gt2 и gt3 в gt</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-5"></a>gt <span class="o">&lt;-</span> gtable_add_grob<span class="p">(</span>gt<span class="p">,</span> gt1<span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-6"></a>gt <span class="o">&lt;-</span> gtable_add_grob<span class="p">(</span>gt<span class="p">,</span> gt2<span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-7"></a>gt <span class="o">&lt;-</span> gtable_add_grob<span class="p">(</span>gt<span class="p">,</span> gt3<span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">2</span><span class="p">)</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-8"></a>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-9"></a><span class="c1"># Строим рисунок</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-10"></a>grid.newpage<span class="p">()</span>
<a name="rest_code_fc5745a3fc4f42948f0434888e968fff-11"></a>grid.draw<span class="p">(</span>gt<span class="p">)</span>
</pre>
<a class="reference external image-reference" href="images/2014/10/19/marginal-plots/unnamed-chunk-1-1.png"><img alt="/images/2014/10/19/marginal-plots/unnamed-chunk-1-1.thumbnail.png" class="align-center" src="images/2014/10/19/marginal-plots/unnamed-chunk-1-1.thumbnail.png"></a>
</div>
</div>
    </div>
    </article>
</div>







         </main><footer id="footer"><p>Contents © 2017         <a href="mailto:karateev.pavel@ya.ru">Pavel Karateev</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
    
    

        <script src="assets/js/baguetteBox.min.js"></script><script>baguetteBox.run('a.reference', {
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});</script>
</body>
</html>
