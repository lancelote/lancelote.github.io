<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>tidyr HOW-TO | Pavel Karateev</title>
<link href="../../../../../assets/css/baguetteBox.min.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/rst_base.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/nikola_rst.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../../../assets/css/custom.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../../../rss.xml">
<link rel="canonical" href="http://pavelkarateev.com/posts/2014/12/13/tidyr-how-to/">
<!--[if lt IE 9]><script src="../../../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Pavel Karateev">
<link rel="prev" href="../../../11/03/mosaic-plot/" title="Мозаичные диаграммы в ggplot2" type="text/html">
<link rel="next" href="../../../../2015/04/21/djangogirls-ru/" title="Перевод руководства Djangogirls" type="text/html">
<meta property="og:site_name" content="Pavel Karateev">
<meta property="og:title" content="tidyr HOW-TO">
<meta property="og:url" content="http://pavelkarateev.com/posts/2014/12/13/tidyr-how-to/">
<meta property="og:description" content="Шпаргалка возможностей пакета tidyr.


Содержание

expand()
extract()
extract_numeric()
gather()
separate()
seq_range()
spread()
unite()
unnest()



Общее
Пакет tidyr за авторством Hadley Wickham'а пр">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-12-13T00:00:00+03:00">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
             <header id="header"><h1 id="brand"><a href="http://pavelkarateev.com/" title="Pavel Karateev" rel="home">

        <span id="blog-title">Pavel Karateev</span>
    </a></h1>

        
            <nav id="menu"><ul>
<li><a href="../../../../../pages/about">About</a></li>
                <li><a href="https://twitter.com/Lancel0te">Twitter</a></li>
                <li><a href="https://github.com/lancelote/lancelote.github.io">Source</a></li>
                <li><a href="../../../../../archive.html">Archive</a></li>
                <li><a href="../../../../../categories/">Tags</a></li>
                <li><a href="../../../../../rss.xml">RSS feed</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">tidyr HOW-TO</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    Pavel Karateev
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2014-12-13T00:00:00+03:00" itemprop="datePublished" title="2014-12-13 00:00">2014-12-13 00:00</time></a>
            </p>
                <p class="commentline">            <a href="#disqus_thread" data-disqus-identifier="cache/posts/2014/12/13/tidyr.html">Comments</a>


                    </p>
<p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Шпаргалка возможностей пакета <tt class="docutils literal">tidyr</tt>.</p>
<!-- TEASER_END -->
<div class="section" id="id1">
<h2>Содержание</h2>
<ol class="arabic simple">
<li><a class="reference internal" href="#expand">expand()</a></li>
<li><a class="reference internal" href="#extract">extract()</a></li>
<li><a class="reference internal" href="#extract-numeric">extract_numeric()</a></li>
<li><a class="reference internal" href="#gather">gather()</a></li>
<li><a class="reference internal" href="#separate">separate()</a></li>
<li><a class="reference internal" href="#seq-range">seq_range()</a></li>
<li><a class="reference internal" href="#spread">spread()</a></li>
<li><a class="reference internal" href="#unite">unite()</a></li>
<li><a class="reference internal" href="#unnest">unnest()</a></li>
</ol>
</div>
<div class="section" id="id2">
<h2>Общее</h2>
<p>Пакет <tt class="docutils literal">tidyr</tt> за авторством Hadley Wickham'а предназначен для первичной обработки сырых данных, в частности - изменения их структуры. Для начала нам потребуются сам <tt class="docutils literal">tidyr</tt>, а также <tt class="docutils literal">dplyr</tt>:</p>
<pre class="code r"><a name="rest_code_19f6fecea2264764bbd4f5cf2afc7054-1"></a><span class="nf">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span>
<a name="rest_code_19f6fecea2264764bbd4f5cf2afc7054-2"></a><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</pre>
</div>
<div class="section" id="expand">
<h2>expand()</h2>
<div class="section" id="id3">
<h3>Назначение</h3>
<p>Создает <tt class="docutils literal">data.frame</tt> включающий все комбинации заданных переменных без перестановок</p>
</div>
<div class="section" id="id4">
<h3>Использование</h3>
<p><tt class="docutils literal">expand(data, <span class="pre">...)</span></tt></p>
</div>
<div class="section" id="id5">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - оригинальный <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">...</tt> - имена переменных для комбинации (допустимы выражения вместо непосредственно имен)</li>
</ul>
</div>
<div class="section" id="id6">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_1795efe497974e71b8c8e29e89be5879-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">a</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">5</span><span class="p">),</span> <span class="n">b</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">3</span><span class="p">),</span> <span class="n">c</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">))</span>
<a name="rest_code_1795efe497974e71b8c8e29e89be5879-2"></a><span class="n">df</span>
</pre>
<pre class="code text"><a name="rest_code_8d2e3200305a42298e997217d4987b25-1"></a>##   a b c
<a name="rest_code_8d2e3200305a42298e997217d4987b25-2"></a>## 1 1 3 1
<a name="rest_code_8d2e3200305a42298e997217d4987b25-3"></a>## 2 2 5 2
<a name="rest_code_8d2e3200305a42298e997217d4987b25-4"></a>## 3 5 3 3
</pre>
<p>Все комбинации переменных <tt class="docutils literal">vs</tt> и <tt class="docutils literal">cyl</tt>:</p>
<pre class="code r"><a name="rest_code_9daa441e5c094835903a4bdbb574f27e-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">mtcars</span><span class="p">,</span> <span class="n">vs</span><span class="p">,</span> <span class="n">cyl</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-1"></a>##   vs cyl
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-2"></a>## 1  0   4
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-3"></a>## 2  0   6
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-4"></a>## 3  0   8
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-5"></a>## 4  1   4
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-6"></a>## 5  1   6
<a name="rest_code_5418f3d2f55e480d9bb8845afedf5a4f-7"></a>## 6  1   8
</pre>
<p>Все комбинации переменных <tt class="docutils literal">cyl</tt> и <tt class="docutils literal">mpg</tt>, последняя при этом принимает только минимальное или максимальное значение:</p>
<pre class="code r"><a name="rest_code_92e05799fe0f42ffa4f8c2dc7b0b37c4-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">mtcars</span><span class="p">,</span> <span class="n">cyl</span><span class="p">,</span> <span class="n">mpg</span> <span class="o">=</span> <span class="nf">seq_range</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="m">2</span><span class="p">))</span>
</pre>
<pre class="code text"><a name="rest_code_d02c81721864410cb770de39fbaaf637-1"></a>##   cyl  mpg
<a name="rest_code_d02c81721864410cb770de39fbaaf637-2"></a>## 1   4 10.4
<a name="rest_code_d02c81721864410cb770de39fbaaf637-3"></a>## 2   4 33.9
<a name="rest_code_d02c81721864410cb770de39fbaaf637-4"></a>## 3   6 10.4
<a name="rest_code_d02c81721864410cb770de39fbaaf637-5"></a>## 4   6 33.9
<a name="rest_code_d02c81721864410cb770de39fbaaf637-6"></a>## 5   8 10.4
<a name="rest_code_d02c81721864410cb770de39fbaaf637-7"></a>## 6   8 33.9
</pre>
<p>Все комбинации переменных <tt class="docutils literal">cyl</tt> и <tt class="docutils literal">mpg</tt>, последняя при этом принимает значения из разбитого на 5 равных частей диапазона:</p>
<pre class="code r"><a name="rest_code_4a03863eabdb46d882728b94013f72d5-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">mtcars</span><span class="p">,</span> <span class="n">cyl</span><span class="p">,</span> <span class="n">mpg</span> <span class="o">=</span> <span class="nf">seq_range</span><span class="p">(</span><span class="n">mpg</span><span class="p">,</span> <span class="m">5</span><span class="p">))</span>
</pre>
<pre class="code text"><a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-1"></a>##    cyl    mpg
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-2"></a>## 1    4 10.400
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-3"></a>## 2    4 16.275
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-4"></a>## 3    4 22.150
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-5"></a>## 4    4 28.025
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-6"></a>## 5    4 33.900
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-7"></a>## 6    6 10.400
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-8"></a>## 7    6 16.275
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-9"></a>## 8    6 22.150
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-10"></a>## 9    6 28.025
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-11"></a>## 10   6 33.900
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-12"></a>## 11   8 10.400
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-13"></a>## 12   8 16.275
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-14"></a>## 13   8 22.150
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-15"></a>## 14   8 28.025
<a name="rest_code_6fade9a4532c4fce8bde03fbcca773f3-16"></a>## 15   8 33.900
</pre>
<p>Все комбинации переменных <tt class="docutils literal">a</tt>, <tt class="docutils literal">b</tt> и <tt class="docutils literal">c</tt>:</p>
<pre class="code r"><a name="rest_code_6c27bb3463a34ea5b7b607b775741349-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_1260a4dac2ee4c5daa16389402393917-1"></a>##    a b c
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-2"></a>## 1  1 3 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-3"></a>## 2  1 3 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-4"></a>## 3  1 3 3
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-5"></a>## 4  1 5 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-6"></a>## 5  1 5 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-7"></a>## 6  1 5 3
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-8"></a>## 7  2 3 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-9"></a>## 8  2 3 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-10"></a>## 9  2 3 3
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-11"></a>## 10 2 5 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-12"></a>## 11 2 5 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-13"></a>## 12 2 5 3
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-14"></a>## 13 5 3 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-15"></a>## 14 5 3 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-16"></a>## 15 5 3 3
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-17"></a>## 16 5 5 1
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-18"></a>## 17 5 5 2
<a name="rest_code_1260a4dac2ee4c5daa16389402393917-19"></a>## 18 5 5 3
</pre>
<p>Все комбинации переменных <tt class="docutils literal">a</tt> и <tt class="docutils literal">b</tt>:</p>
<pre class="code r"><a name="rest_code_4c4d52246b564e63acabcb98774a4bd1-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-1"></a>##   a b
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-2"></a>## 1 1 3
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-3"></a>## 2 1 5
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-4"></a>## 3 2 3
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-5"></a>## 4 2 5
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-6"></a>## 5 5 3
<a name="rest_code_a4670d5219544f43a9cc3d0a62e748b2-7"></a>## 6 5 5
</pre>
<p>Все комбинации переменных <tt class="docutils literal">a</tt> и <tt class="docutils literal">c</tt>:</p>
<pre class="code r"><a name="rest_code_d819e4f502e346e9a1f380490a1d7421-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-1"></a>##   a c
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-2"></a>## 1 1 1
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-3"></a>## 2 1 2
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-4"></a>## 3 1 3
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-5"></a>## 4 2 1
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-6"></a>## 5 2 2
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-7"></a>## 6 2 3
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-8"></a>## 7 5 1
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-9"></a>## 8 5 2
<a name="rest_code_92becba719b240a99b5fa4aabc0f3fdf-10"></a>## 9 5 3
</pre>
<p>Все комбинации переменных <tt class="docutils literal">b</tt> и <tt class="docutils literal">c</tt>:</p>
<pre class="code r"><a name="rest_code_b6151f3adfff4d2980413edc111a12a3-1"></a><span class="nf">expand</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-1"></a>##   b c
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-2"></a>## 1 3 1
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-3"></a>## 2 3 2
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-4"></a>## 3 3 3
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-5"></a>## 4 5 1
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-6"></a>## 5 5 2
<a name="rest_code_04bae665bba444d6a5f2f8b2cd8174e6-7"></a>## 6 5 3
</pre>
</div>
</div>
<div class="section" id="extract">
<h2>extract()</h2>
<div class="section" id="id7">
<h3>Назначение</h3>
<p>Применяет регулярное выражение к переменной и создает одну или несколько новых на основе результата</p>
</div>
<div class="section" id="id8">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_c3bd702193164af8b1e4577859eb52e0-1"></a>extract(data, col, into, regex = "([[:alnum:]]+)", remove = TRUE,
<a name="rest_code_c3bd702193164af8b1e4577859eb52e0-2"></a>        convert = FALSE, ...)
</pre>
</div>
<div class="section" id="id9">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - оригинальный <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">col</tt> - имя переменной</li>
<li>
<tt class="docutils literal">into</tt> - имена новых переменных</li>
<li>
<tt class="docutils literal">regex</tt> - регулярное выражение для поиска требуемых данных</li>
<li>
<tt class="docutils literal">remove</tt> - если <tt class="docutils literal">TRUE</tt> - удаляет <tt class="docutils literal">col</tt> из результирующего <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">convert</tt> - если <tt class="docutils literal">TRUE</tt> - применяет <tt class="docutils literal">type.convert</tt> c <tt class="docutils literal">as.is = TRUE</tt> к новым переменным</li>
<li>
<tt class="docutils literal">...</tt> - дополнительные аргументы для <tt class="docutils literal">regexec</tt>
</li>
</ul>
</div>
<div class="section" id="id10">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_d613db0480044b2e96432b2a93f3cdb5-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a.b"</span><span class="p">,</span> <span class="s">"a.d"</span><span class="p">,</span> <span class="s">"b.c"</span><span class="p">))</span>
<a name="rest_code_d613db0480044b2e96432b2a93f3cdb5-2"></a><span class="n">df</span>
</pre>
<pre class="code text"><a name="rest_code_6eb24f2913c64affaebe93ff004b7b63-1"></a>##     x
<a name="rest_code_6eb24f2913c64affaebe93ff004b7b63-2"></a>## 1 a.b
<a name="rest_code_6eb24f2913c64affaebe93ff004b7b63-3"></a>## 2 a.d
<a name="rest_code_6eb24f2913c64affaebe93ff004b7b63-4"></a>## 3 b.c
</pre>
<p>Извлечь из переменной <tt class="docutils literal">x</tt> первую букву:</p>
<pre class="code r"><a name="rest_code_04c263e066b84eb085d7698e8c9a314d-1"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">extract</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s">"A"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_dcacba8de560425382ee2356ec0fb2f9-1"></a>##   A
<a name="rest_code_dcacba8de560425382ee2356ec0fb2f9-2"></a>## 1 a
<a name="rest_code_dcacba8de560425382ee2356ec0fb2f9-3"></a>## 2 a
<a name="rest_code_dcacba8de560425382ee2356ec0fb2f9-4"></a>## 3 b
</pre>
<p>Разбить переменную <tt class="docutils literal">x</tt>:</p>
<pre class="code r"><a name="rest_code_989e24bea2b14de386426abf1f97a52a-1"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">extract</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">),</span> <span class="s">"([[:alnum:]]+)\\.([[:alnum:]]+)"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_542865802ac24388b632423feb5e2512-1"></a>##   A B
<a name="rest_code_542865802ac24388b632423feb5e2512-2"></a>## 1 a b
<a name="rest_code_542865802ac24388b632423feb5e2512-3"></a>## 2 a d
<a name="rest_code_542865802ac24388b632423feb5e2512-4"></a>## 3 b c
</pre>
</div>
</div>
<div class="section" id="extract-numeric">
<h2>extract_numeric()</h2>
<div class="section" id="id11">
<h3>Назначение</h3>
<p>Используя регулярное выражение удаляет все нецифровые знаки из строки и трансформирует результат в число</p>
</div>
<div class="section" id="id12">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_44f84e74c72c420b8e34d3dd6a27d50e-1"></a>extract_numeric(x)
</pre>
</div>
<div class="section" id="id13">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">x</tt> - <tt class="docutils literal">character vector</tt> или <tt class="docutils literal">factor</tt>
</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Примеры использования</h3>
<pre class="code r"><a name="rest_code_7587b5367c2e4d58a19a496ccd767e7c-1"></a><span class="nf">extract_numeric</span><span class="p">(</span><span class="s">"$1,200.34"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_efaedef836354d70adc81d59cceabdd4-1"></a>## [1] 1200.34
</pre>
<pre class="code r"><a name="rest_code_abe7ac8a81e748b586461ed99402d058-1"></a><span class="nf">extract_numeric</span><span class="p">(</span><span class="s">"-2%"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_460d7bab6f564f13a591f5b9d61cbdf4-1"></a>## [1] -2
</pre>
<p>Может некорректно работать со строками, которые точно не являются цифровыми данными:</p>
<pre class="code r"><a name="rest_code_fea87c09136945afae1b23f205c44ec1-1"></a><span class="nf">extract_numeric</span><span class="p">(</span><span class="s">"-2-2"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_f408c7e578ea43aeb0d3dbe55fb8226b-1"></a>## Warning in extract_numeric("-2-2"): NAs introduced by coercion
<a name="rest_code_f408c7e578ea43aeb0d3dbe55fb8226b-2"></a>## [1] NA
</pre>
<pre class="code r"><a name="rest_code_a25850cbca684fedba08179dd615531a-1"></a><span class="nf">extract_numeric</span><span class="p">(</span><span class="s">"12abc34"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_582d6071385e4d30ac4e9e8fcc84f309-1"></a>## [1] 1234
</pre>
</div>
</div>
<div class="section" id="gather">
<h2>gather()</h2>
<div class="section" id="id15">
<h3>Назначение</h3>
<p>Объединяет переменные, имена переменных для объединения становятся уровнями переменной <tt class="docutils literal">key</tt>, значения объединенных переменных заполняют соответственно переменную <tt class="docutils literal">value</tt></p>
</div>
<div class="section" id="id16">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_906e60f1831c4b7d93735cdd86a51417-1"></a>gather(data, key, value, ..., na.rm = FALSE, convert = FALSE)
</pre>
</div>
<div class="section" id="id17">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - оригинальный <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">key</tt>, <tt class="docutils literal">value</tt> - <tt class="docutils literal">key</tt>, <tt class="docutils literal">value</tt> переменные</li>
<li>
<tt class="docutils literal">...</tt> - переменные для объединения, выбор нескольких: <tt class="docutils literal">x:z</tt>, исключить: <tt class="docutils literal"><span class="pre">-y</span></tt>
</li>
<li>
<tt class="docutils literal">na.rm</tt> - если <tt class="docutils literal">TRUE</tt> - удалить все <tt class="docutils literal">NA</tt>
</li>
<li>
<tt class="docutils literal">convert</tt> - если <tt class="docutils literal">TRUE</tt> - применяет <tt class="docutils literal">type.convert</tt> к <tt class="docutils literal">key</tt> переменной</li>
</ul>
</div>
<div class="section" id="id18">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_0409460e0b214366948884a4ffc5b99d-1"></a><span class="n">stocks</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-2"></a><span class="n">time</span> <span class="o">=</span> <span class="nf">as.Date</span><span class="p">(</span><span class="s">'2009-01-01'</span><span class="p">)</span> <span class="o">+</span> <span class="m">0</span><span class="o">:</span><span class="m">9</span><span class="p">,</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-3"></a><span class="n">X</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-4"></a><span class="n">Y</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-5"></a><span class="n">Z</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-6"></a><span class="p">)</span>
<a name="rest_code_0409460e0b214366948884a4ffc5b99d-7"></a><span class="n">stocks</span>
</pre>
<pre class="code text"><a name="rest_code_9c81672504a84e888aeebebf55347a20-1"></a>##          time          X          Y           Z
<a name="rest_code_9c81672504a84e888aeebebf55347a20-2"></a>## 1  2009-01-01  0.7722318 -0.3642657 -2.50084998
<a name="rest_code_9c81672504a84e888aeebebf55347a20-3"></a>## 2  2009-01-02 -1.1323590  0.7835050 -1.44378404
<a name="rest_code_9c81672504a84e888aeebebf55347a20-4"></a>## 3  2009-01-03 -0.8616668 -2.5209075  2.19735867
<a name="rest_code_9c81672504a84e888aeebebf55347a20-5"></a>## 4  2009-01-04 -0.6363773 -3.6459329 -2.27906230
<a name="rest_code_9c81672504a84e888aeebebf55347a20-6"></a>## 5  2009-01-05  1.3777546  0.6740792  2.47886088
<a name="rest_code_9c81672504a84e888aeebebf55347a20-7"></a>## 6  2009-01-06  1.1138555 -2.7431003  2.13743541
<a name="rest_code_9c81672504a84e888aeebebf55347a20-8"></a>## 7  2009-01-07 -0.4055423 -0.3971725  0.32445108
<a name="rest_code_9c81672504a84e888aeebebf55347a20-9"></a>## 8  2009-01-08 -0.6551642 -1.3071296 -4.39142177
<a name="rest_code_9c81672504a84e888aeebebf55347a20-10"></a>## 9  2009-01-09 -0.8421454 -0.9334135 -0.02401832
<a name="rest_code_9c81672504a84e888aeebebf55347a20-11"></a>## 10 2009-01-10 -0.1655489 -0.6961085 -0.82861047
</pre>
<p>Объединить имена переменных <tt class="docutils literal">X</tt>, <tt class="docutils literal">Y</tt>, <tt class="docutils literal">Z</tt> в качестве уровней новой переменной <tt class="docutils literal">stock</tt>, значения объединенных переменных заполнят переменную <tt class="docutils literal">price</tt>:</p>
<pre class="code r"><a name="rest_code_2869c3d27a8c4a8ab0b813e3858a5d5f-1"></a><span class="n">stocks</span> <span class="o">%&gt;%</span> <span class="nf">gather</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="o">-</span><span class="n">time</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-1"></a>##          time stock       price
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-2"></a>## 1  2009-01-01     X  0.77223178
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-3"></a>## 2  2009-01-02     X -1.13235898
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-4"></a>## 3  2009-01-03     X -0.86166677
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-5"></a>## 4  2009-01-04     X -0.63637728
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-6"></a>## 5  2009-01-05     X  1.37775462
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-7"></a>## 6  2009-01-06     X  1.11385552
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-8"></a>## 7  2009-01-07     X -0.40554232
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-9"></a>## 8  2009-01-08     X -0.65516418
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-10"></a>## 9  2009-01-09     X -0.84214541
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-11"></a>## 10 2009-01-10     X -0.16554890
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-12"></a>## 11 2009-01-01     Y -0.36426573
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-13"></a>## 12 2009-01-02     Y  0.78350495
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-14"></a>## 13 2009-01-03     Y -2.52090748
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-15"></a>## 14 2009-01-04     Y -3.64593285
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-16"></a>## 15 2009-01-05     Y  0.67407924
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-17"></a>## 16 2009-01-06     Y -2.74310035
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-18"></a>## 17 2009-01-07     Y -0.39717249
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-19"></a>## 18 2009-01-08     Y -1.30712963
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-20"></a>## 19 2009-01-09     Y -0.93341350
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-21"></a>## 20 2009-01-10     Y -0.69610847
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-22"></a>## 21 2009-01-01     Z -2.50084998
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-23"></a>## 22 2009-01-02     Z -1.44378404
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-24"></a>## 23 2009-01-03     Z  2.19735867
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-25"></a>## 24 2009-01-04     Z -2.27906230
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-26"></a>## 25 2009-01-05     Z  2.47886088
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-27"></a>## 26 2009-01-06     Z  2.13743541
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-28"></a>## 27 2009-01-07     Z  0.32445108
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-29"></a>## 28 2009-01-08     Z -4.39142177
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-30"></a>## 29 2009-01-09     Z -0.02401832
<a name="rest_code_cbc1865a90c04a98a0a82e03031dfa1a-31"></a>## 30 2009-01-10     Z -0.82861047
</pre>
</div>
</div>
<div class="section" id="separate">
<h2>separate()</h2>
<div class="section" id="id19">
<h3>Назначение</h3>
<p>Разбивает переменную на несколько</p>
</div>
<div class="section" id="id20">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_fdd9e50e51104d5a9b0a87096883d709-1"></a>separate(data, col, into, sep = "[^[:alnum:]]+", remove = TRUE,
<a name="rest_code_fdd9e50e51104d5a9b0a87096883d709-2"></a>         convert = FALSE, extra = "error", ...)
</pre>
</div>
<div class="section" id="id21">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - оригинальный <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">col</tt> - имя переменной для разбивки</li>
<li>
<tt class="docutils literal">into</tt> - имена новых переменных</li>
<li>
<tt class="docutils literal">sep</tt> - разделитель, если <tt class="docutils literal">character</tt> - воспринимается как регулярное выражение, по-умолчанию - последовательность не цифро-буквенных знаков, если <tt class="docutils literal">numeric</tt> - воспринимается как позиция для разделения</li>
<li>
<tt class="docutils literal">remove</tt> - если <tt class="docutils literal">TRUE</tt> - удаляет <tt class="docutils literal">col</tt> из результирующего <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">convert</tt> - если <tt class="docutils literal">TRUE</tt> - применяет <tt class="docutils literal">type.convert</tt> c <tt class="docutils literal">as.is = TRUE</tt> к новым переменным</li>
<li><dl class="first docutils">
<dt>
<tt class="docutils literal">extra</tt> - если <tt class="docutils literal">sep</tt> - <tt class="docutils literal">character</tt>, то аргумент задает реакцию на превышение допустимого числа новых переменных (<tt class="docutils literal">into</tt>):</dt>
<dd><ul class="first last">
<li>
<tt class="docutils literal">error</tt> - ошибка по-умолчанию</li>
<li>
<tt class="docutils literal">drop</tt> - возвращает <tt class="docutils literal">length(into)</tt>, отбрасывает все сверху или расширяет <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">merge</tt> - разделяет только <tt class="docutils literal">length(into)</tt> раз</li>
</ul></dd>
</dl></li>
<li>
<tt class="docutils literal">...</tt> - дополнительные переменные для <tt class="docutils literal">strsplit</tt>
</li>
</ul>
</div>
<div class="section" id="id22">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_bbb032986e9d4814abb108d505db8942-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a.b"</span><span class="p">,</span> <span class="s">"a.d"</span><span class="p">,</span> <span class="s">"b.c"</span><span class="p">))</span>
<a name="rest_code_bbb032986e9d4814abb108d505db8942-2"></a><span class="n">df</span>
</pre>
<pre class="code text"><a name="rest_code_dffc66745d294f0da17f2f573241c9c9-1"></a>##     x
<a name="rest_code_dffc66745d294f0da17f2f573241c9c9-2"></a>## 1 a.b
<a name="rest_code_dffc66745d294f0da17f2f573241c9c9-3"></a>## 2 a.d
<a name="rest_code_dffc66745d294f0da17f2f573241c9c9-4"></a>## 3 b.c
</pre>
<p>Разбить переменную <tt class="docutils literal">x</tt> на две, разделитель - <tt class="docutils literal">.</tt>:</p>
<pre class="code r"><a name="rest_code_caaf4ebbbfcc456aaddc8cba899115af-1"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">separate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"A"</span><span class="p">,</span> <span class="s">"B"</span><span class="p">))</span>
</pre>
<pre class="code text"><a name="rest_code_3176416a70fe48e48f7c6bada162bcab-1"></a>##   A B
<a name="rest_code_3176416a70fe48e48f7c6bada162bcab-2"></a>## 1 a b
<a name="rest_code_3176416a70fe48e48f7c6bada162bcab-3"></a>## 2 a d
<a name="rest_code_3176416a70fe48e48f7c6bada162bcab-4"></a>## 3 b c
</pre>
<p>Если строки нельзя разделить на равное число переменных:</p>
<pre class="code r"><a name="rest_code_450b594be69f4304aeb1886f51bb69b5-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"a b"</span><span class="p">,</span> <span class="s">"a b c"</span><span class="p">))</span>
<a name="rest_code_450b594be69f4304aeb1886f51bb69b5-2"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">separate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">),</span> <span class="n">extra</span> <span class="o">=</span> <span class="s">"merge"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_ec5e79fe69d5456e94743a381f333607-1"></a>##   a    b
<a name="rest_code_ec5e79fe69d5456e94743a381f333607-2"></a>## 1 a &lt;NA&gt;
<a name="rest_code_ec5e79fe69d5456e94743a381f333607-3"></a>## 2 a    b
<a name="rest_code_ec5e79fe69d5456e94743a381f333607-4"></a>## 3 a  b c
</pre>
<pre class="code r"><a name="rest_code_149c67e572104446ac1f98b425743739-1"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">separate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">),</span> <span class="n">extra</span> <span class="o">=</span> <span class="s">"drop"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_4d28a8bf46ae42e2b1c9ab143805e578-1"></a>##   a    b
<a name="rest_code_4d28a8bf46ae42e2b1c9ab143805e578-2"></a>## 1 a &lt;NA&gt;
<a name="rest_code_4d28a8bf46ae42e2b1c9ab143805e578-3"></a>## 2 a    b
<a name="rest_code_4d28a8bf46ae42e2b1c9ab143805e578-4"></a>## 3 a    b
</pre>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_5667cb516f324eb9a118742e5ab35549-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"x: 123"</span><span class="p">,</span> <span class="s">"y: error: 7"</span><span class="p">))</span>
<a name="rest_code_5667cb516f324eb9a118742e5ab35549-2"></a><span class="n">df</span>
</pre>
<pre class="code text"><a name="rest_code_3a13d21799f846bc89dae3cdda699f5b-1"></a>##             x
<a name="rest_code_3a13d21799f846bc89dae3cdda699f5b-2"></a>## 1      x: 123
<a name="rest_code_3a13d21799f846bc89dae3cdda699f5b-3"></a>## 2 y: error: 7
</pre>
<p>Разбить строки строго на две переменные по первому включению <tt class="docutils literal">sep</tt>:</p>
<pre class="code r"><a name="rest_code_65f1d892016a4d18bbd68e7e65b4df6a-1"></a><span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">separate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"key"</span><span class="p">,</span> <span class="s">"value"</span><span class="p">),</span> <span class="s">": "</span><span class="p">,</span> <span class="n">extra</span> <span class="o">=</span> <span class="s">"merge"</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_2280ca636c5a45f492cc0aaa15b8ba06-1"></a>##   key    value
<a name="rest_code_2280ca636c5a45f492cc0aaa15b8ba06-2"></a>## 1   x      123
<a name="rest_code_2280ca636c5a45f492cc0aaa15b8ba06-3"></a>## 2   y error: 7
</pre>
</div>
</div>
<div class="section" id="seq-range">
<h2>seq_range()</h2>
<div class="section" id="id23">
<h3>Назначение</h3>
<p>Возвращает вектор из <tt class="docutils literal">n</tt> значений <tt class="docutils literal">x</tt> от минимального до максимального с равными промежутками</p>
</div>
<div class="section" id="id24">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_57d5fc28d8c747a7825cbd8152c7b3d6-1"></a>seq_range(x, n)
</pre>
</div>
<div class="section" id="id25">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">x</tt> - <tt class="docutils literal">numeric vector</tt>
</li>
<li>
<tt class="docutils literal">n</tt> - число значений</li>
</ul>
</div>
<div class="section" id="id26">
<h3>Примеры использования</h3>
<p>Разобьем диапазон значений вектора <tt class="docutils literal">1:100</tt>:</p>
<pre class="code r"><a name="rest_code_8d963aa0542242f8a1b8131cafab9abc-1"></a><span class="nf">seq_range</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">100</span><span class="p">,</span> <span class="m">5</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_b66834c7ac9b4a6f94b3f6e60b7d9e5f-1"></a>## [1]   1.00  25.75  50.50  75.25 100.00
</pre>
</div>
</div>
<div class="section" id="spread">
<h2>spread()</h2>
<div class="section" id="id27">
<h3>Назначение</h3>
<p>Переформатирует <tt class="docutils literal">data.frame</tt> - используя в качестве имен новых переменных уровни заданной переменной <tt class="docutils literal">key</tt>, а в качестве значений - соответствующие значения переменной <tt class="docutils literal">value</tt>.</p>
</div>
<div class="section" id="id28">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_0a7048f3874b4e9793b71721707a8219-1"></a>spread(data, key, value, fill = NA, convert = FALSE, drop = TRUE)
</pre>
</div>
<div class="section" id="id29">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - <tt class="docutils literal">numeric vector</tt>
</li>
<li>
<tt class="docutils literal">key</tt> - переменная, чьи уровни станут новыми переменными</li>
<li>
<tt class="docutils literal">value</tt> - переменная, соответствующими значениями которой будут заполнены новые столбцы</li>
<li>
<tt class="docutils literal">fill</tt> - если для комбинации переменной <tt class="docutils literal">key</tt> и других переменных нет значения - подставляет на его место указанное</li>
<li>
<tt class="docutils literal">convert</tt> - если <tt class="docutils literal">TRUE</tt> - применяет <tt class="docutils literal">type.convert</tt> c <tt class="docutils literal">as.is = TRUE</tt> к новым переменным</li>
<li>
<tt class="docutils literal">drop</tt> - если <tt class="docutils literal">FALSE</tt> - сохранить уровни факторов, для которых нет значений в данных, заполняя их по правилу <tt class="docutils literal">fill</tt>
</li>
</ul>
</div>
<div class="section" id="id30">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-1"></a><span class="n">stocks</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-2"></a><span class="n">time</span> <span class="o">=</span> <span class="nf">as.Date</span><span class="p">(</span><span class="s">'2009-01-01'</span><span class="p">)</span> <span class="o">+</span> <span class="m">0</span><span class="o">:</span><span class="m">9</span><span class="p">,</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-3"></a><span class="n">X</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-4"></a><span class="n">Y</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">),</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-5"></a><span class="n">Z</span> <span class="o">=</span> <span class="nf">rnorm</span><span class="p">(</span><span class="m">10</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">4</span><span class="p">)</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-6"></a><span class="p">)</span>
<a name="rest_code_430e7ca957014c7e8bf762f8d062fe04-7"></a><span class="n">stocks</span>
</pre>
<pre class="code text"><a name="rest_code_cfc33d3128084677905b7ff0916d1550-1"></a>##          time          X          Y          Z
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-2"></a>## 1  2009-01-01  0.3911387  2.0635862 -6.3953715
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-3"></a>## 2  2009-01-02  0.1203100 -1.3411346 -4.5907582
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-4"></a>## 3  2009-01-03 -0.3916139 -0.3763128 -0.6275635
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-5"></a>## 4  2009-01-04 -0.2890859  1.0035137 -2.9846424
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-6"></a>## 5  2009-01-05  0.2296824  1.0974012  0.6136485
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-7"></a>## 6  2009-01-06  0.0278537  4.9167183 -5.7563632
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-8"></a>## 7  2009-01-07  0.7349981  0.4856101 -6.7558963
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-9"></a>## 8  2009-01-08 -0.5096926 -0.8247462  2.5661235
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-10"></a>## 9  2009-01-09  0.2338707 -0.5513422 -0.6923370
<a name="rest_code_cfc33d3128084677905b7ff0916d1550-11"></a>## 10 2009-01-10  2.3231925  0.2870178  1.7580478
</pre>
<p>Противоположность <tt class="docutils literal">gather</tt>:</p>
<pre class="code r"><a name="rest_code_63ce6c63fb7943dfaddbdee0c6dfa8f1-1"></a><span class="n">stocksm</span> <span class="o">&lt;-</span> <span class="n">stocks</span> <span class="o">%&gt;%</span> <span class="nf">gather</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="o">-</span><span class="n">time</span><span class="p">)</span>
<a name="rest_code_63ce6c63fb7943dfaddbdee0c6dfa8f1-2"></a><span class="nf">head</span><span class="p">(</span><span class="n">stocksm</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-1"></a>##         time stock      price
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-2"></a>## 1 2009-01-01     X  0.3911387
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-3"></a>## 2 2009-01-02     X  0.1203100
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-4"></a>## 3 2009-01-03     X -0.3916139
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-5"></a>## 4 2009-01-04     X -0.2890859
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-6"></a>## 5 2009-01-05     X  0.2296824
<a name="rest_code_db5868a699c64e1aabc1faf3eae6a34e-7"></a>## 6 2009-01-06     X  0.0278537
</pre>
<pre class="code r"><a name="rest_code_8f0a170647df4c3396580b40982f62b2-1"></a><span class="n">stocksm</span> <span class="o">%&gt;%</span> <span class="nf">spread</span><span class="p">(</span><span class="n">stock</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_034f2178c563487c923c89183bf57418-1"></a>##          time          X          Y          Z
<a name="rest_code_034f2178c563487c923c89183bf57418-2"></a>## 1  2009-01-01  0.3911387  2.0635862 -6.3953715
<a name="rest_code_034f2178c563487c923c89183bf57418-3"></a>## 2  2009-01-02  0.1203100 -1.3411346 -4.5907582
<a name="rest_code_034f2178c563487c923c89183bf57418-4"></a>## 3  2009-01-03 -0.3916139 -0.3763128 -0.6275635
<a name="rest_code_034f2178c563487c923c89183bf57418-5"></a>## 4  2009-01-04 -0.2890859  1.0035137 -2.9846424
<a name="rest_code_034f2178c563487c923c89183bf57418-6"></a>## 5  2009-01-05  0.2296824  1.0974012  0.6136485
<a name="rest_code_034f2178c563487c923c89183bf57418-7"></a>## 6  2009-01-06  0.0278537  4.9167183 -5.7563632
<a name="rest_code_034f2178c563487c923c89183bf57418-8"></a>## 7  2009-01-07  0.7349981  0.4856101 -6.7558963
<a name="rest_code_034f2178c563487c923c89183bf57418-9"></a>## 8  2009-01-08 -0.5096926 -0.8247462  2.5661235
<a name="rest_code_034f2178c563487c923c89183bf57418-10"></a>## 9  2009-01-09  0.2338707 -0.5513422 -0.6923370
<a name="rest_code_034f2178c563487c923c89183bf57418-11"></a>## 10 2009-01-10  2.3231925  0.2870178  1.7580478
</pre>
<p>Разбить <tt class="docutils literal">price</tt> по переменной <tt class="docutils literal">time</tt>:</p>
<pre class="code r"><a name="rest_code_66ea8de0acf24e34b7855267e258cd19-1"></a><span class="n">stocksm</span> <span class="o">%&gt;%</span> <span class="nf">spread</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="n">price</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-1"></a>##   stock 2009-01-01 2009-01-02 2009-01-03 2009-01-04 2009-01-05 2009-01-06
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-2"></a>## 1     X  0.3911387   0.120310 -0.3916139 -0.2890859  0.2296824  0.0278537
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-3"></a>## 2     Y  2.0635862  -1.341135 -0.3763128  1.0035137  1.0974012  4.9167183
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-4"></a>## 3     Z -6.3953715  -4.590758 -0.6275635 -2.9846424  0.6136485 -5.7563632
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-5"></a>##   2009-01-07 2009-01-08 2009-01-09 2009-01-10
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-6"></a>## 1  0.7349981 -0.5096926  0.2338707  2.3231925
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-7"></a>## 2  0.4856101 -0.8247462 -0.5513422  0.2870178
<a name="rest_code_cee60bd1244342fcbeb807f5aa9c5596-8"></a>## 3 -6.7558963  2.5661235 -0.6923370  1.7580478
</pre>
</div>
</div>
<div class="section" id="unite">
<h2>unite()</h2>
<div class="section" id="id31">
<h3>Назначение</h3>
<p>Объединяет переменные в одну</p>
</div>
<div class="section" id="id32">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_53d29281dd75402a9e6370a0fcee9e6a-1"></a>unite(data, col, ..., sep = "_", remove = TRUE)
</pre>
</div>
<div class="section" id="id33">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - <tt class="docutils literal">numeric vector</tt>
</li>
<li>
<tt class="docutils literal">col</tt> - имя базовой переменной</li>
<li>
<tt class="docutils literal">...</tt> - переменные для объединения с базовой</li>
<li>
<tt class="docutils literal">sep</tt> - разделитель между значениями объединенных переменных</li>
<li>
<tt class="docutils literal">remove</tt> - если <tt class="docutils literal">TRUE</tt> - удаляет переменные для объединения</li>
</ul>
</div>
<div class="section" id="id34">
<h3>Примеры использования</h3>
<p>Объединяем переменные <tt class="docutils literal">vs</tt> и <tt class="docutils literal">am</tt> в одну:</p>
<pre class="code r"><a name="rest_code_cff3acec5cd34f1b88a8084b0ce02a96-1"></a><span class="n">mtcars</span> <span class="o">%&gt;%</span>
<a name="rest_code_cff3acec5cd34f1b88a8084b0ce02a96-2"></a>  <span class="nf">unite_</span><span class="p">(</span><span class="s">"vs_am"</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"vs"</span><span class="p">,</span> <span class="s">"am"</span><span class="p">))</span> <span class="o">%&gt;%</span>
<a name="rest_code_cff3acec5cd34f1b88a8084b0ce02a96-3"></a>  <span class="nf">head</span><span class="p">()</span>
</pre>
<pre class="code text"><a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-1"></a>##                    mpg cyl disp  hp drat    wt  qsec vs_am gear carb
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-2"></a>## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46   0_1    4    4
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-3"></a>## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02   0_1    4    4
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-4"></a>## Datsun 710        22.8   4  108  93 3.85 2.320 18.61   1_1    4    1
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-5"></a>## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44   1_0    3    1
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-6"></a>## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02   0_0    3    2
<a name="rest_code_2e2d7605a69c4920a854b1d18ed3a13c-7"></a>## Valiant           18.1   6  225 105 2.76 3.460 20.22   1_0    3    1
</pre>
<p>Противоположность <tt class="docutils literal">separate</tt>:</p>
<pre class="code r"><a name="rest_code_2bf50305f39948ccbc3ae33702a7f9e5-1"></a><span class="n">mtcars</span> <span class="o">%&gt;%</span>
<a name="rest_code_2bf50305f39948ccbc3ae33702a7f9e5-2"></a>  <span class="nf">unite</span><span class="p">(</span><span class="n">vs_am</span><span class="p">,</span> <span class="n">vs</span><span class="p">,</span> <span class="n">am</span><span class="p">)</span> <span class="o">%&gt;%</span>
<a name="rest_code_2bf50305f39948ccbc3ae33702a7f9e5-3"></a>  <span class="nf">separate</span><span class="p">(</span><span class="n">vs_am</span><span class="p">,</span> <span class="nf">c</span><span class="p">(</span><span class="s">"vs"</span><span class="p">,</span> <span class="s">"am"</span><span class="p">))</span> <span class="o">%&gt;%</span>
<a name="rest_code_2bf50305f39948ccbc3ae33702a7f9e5-4"></a>  <span class="nf">head</span><span class="p">()</span>
</pre>
<pre class="code text"><a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-1"></a>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-2"></a>## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-3"></a>## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-4"></a>## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-5"></a>## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-6"></a>## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
<a name="rest_code_7442e5ccda5f4988b5575383268e5cf8-7"></a>## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1
</pre>
</div>
</div>
<div class="section" id="unnest">
<h2>unnest()</h2>
<div class="section" id="id35">
<h3>Назначение</h3>
<p>Разбивает переменную на большее число строк за счет раскрытия вложенных элементов</p>
</div>
<div class="section" id="id36">
<h3>Использование</h3>
<pre class="code text"><a name="rest_code_65b80cc0257d4255a1160c3a64d56b51-1"></a>unnest(data, col = NULL)
</pre>
</div>
<div class="section" id="id37">
<h3>Аргументы</h3>
<ul class="simple">
<li>
<tt class="docutils literal">data</tt> - оригинальный <tt class="docutils literal">data.frame</tt>
</li>
<li>
<tt class="docutils literal">col</tt> - переменная, которую нужно разбить на большее число строк</li>
</ul>
</div>
<div class="section" id="id38">
<h3>Примеры использования</h3>
<p>Данные:</p>
<pre class="code r"><a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-1"></a><span class="n">df</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span>
<a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-2"></a><span class="n">x</span> <span class="o">=</span> <span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">,</span>
<a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-3"></a><span class="n">y</span> <span class="o">=</span> <span class="nf">c</span><span class="p">(</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"d,e,f"</span><span class="p">,</span> <span class="s">"g,h"</span><span class="p">),</span>
<a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-4"></a><span class="n">stringsAsFactors</span> <span class="o">=</span> <span class="kc">FALSE</span>
<a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-5"></a><span class="p">)</span>
<a name="rest_code_76773bdc3a094fd8bd0d650a2fa4a129-6"></a><span class="n">df</span>
</pre>
<pre class="code text"><a name="rest_code_eb411da3a883486ea41d919d12acbe50-1"></a>##   x     y
<a name="rest_code_eb411da3a883486ea41d919d12acbe50-2"></a>## 1 1     a
<a name="rest_code_eb411da3a883486ea41d919d12acbe50-3"></a>## 2 2 d,e,f
<a name="rest_code_eb411da3a883486ea41d919d12acbe50-4"></a>## 3 3   g,h
</pre>
<p>Разбить переменную <tt class="docutils literal">y</tt> на большее число строк:</p>
<pre class="code r"><a name="rest_code_6ebd21c83ab94b10a0709c048caed3db-1"></a><span class="n">df</span> <span class="o">%&gt;%</span>
<a name="rest_code_6ebd21c83ab94b10a0709c048caed3db-2"></a>  <span class="nf">transform</span><span class="p">(</span><span class="n">y</span> <span class="o">=</span> <span class="nf">strsplit</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="s">","</span><span class="p">))</span> <span class="o">%&gt;%</span>
<a name="rest_code_6ebd21c83ab94b10a0709c048caed3db-3"></a>  <span class="nf">unnest</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_49a0f2fbad364f59b8b2076be394406f-1"></a>##   x y
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-2"></a>## 1 1 a
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-3"></a>## 2 2 d
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-4"></a>## 3 2 e
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-5"></a>## 4 2 f
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-6"></a>## 5 3 g
<a name="rest_code_49a0f2fbad364f59b8b2076be394406f-7"></a>## 6 3 h
</pre>
<p>Разобьем стандартный набор данных <tt class="docutils literal">iris</tt> по виду цветка:</p>
<pre class="code r"><a name="rest_code_aff94acd738747daba897e754996b14b-1"></a><span class="n">my_list</span> <span class="o">&lt;-</span> <span class="nf">lapply</span><span class="p">(</span><span class="nf">split</span><span class="p">(</span><span class="nf">subset</span><span class="p">(</span><span class="n">iris</span><span class="p">,</span> <span class="n">select</span> <span class="o">=</span> <span class="o">-</span><span class="n">Species</span><span class="p">),</span><span class="n">iris</span><span class="o">$</span><span class="n">Species</span><span class="p">),</span>
<a name="rest_code_aff94acd738747daba897e754996b14b-2"></a>                  <span class="s">"["</span><span class="p">,</span> <span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span> <span class="p">)</span>
<a name="rest_code_aff94acd738747daba897e754996b14b-3"></a><span class="n">my_list</span>
</pre>
<pre class="code text"><a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-1"></a>## $setosa
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-2"></a>##   Sepal.Length Sepal.Width Petal.Length Petal.Width
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-3"></a>## 1          5.1         3.5          1.4         0.2
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-4"></a>## 2          4.9         3.0          1.4         0.2
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-5"></a>##
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-6"></a>## $versicolor
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-7"></a>##    Sepal.Length Sepal.Width Petal.Length Petal.Width
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-8"></a>## 51          7.0         3.2          4.7         1.4
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-9"></a>## 52          6.4         3.2          4.5         1.5
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-10"></a>##
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-11"></a>## $virginica
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-12"></a>##     Sepal.Length Sepal.Width Petal.Length Petal.Width
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-13"></a>## 101          6.3         3.3          6.0         2.5
<a name="rest_code_44e9d8fea9884f588c7ff5a1c079bb9f-14"></a>## 102          5.8         2.7          5.1         1.9
</pre>
<p>Соберем список обратно в <tt class="docutils literal">data.frame</tt>:</p>
<pre class="code r"><a name="rest_code_7dd29d48c7a748598ea33e2dcc0c0871-1"></a><span class="nf">unnest</span><span class="p">(</span><span class="n">my_list</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_743263f0fdb146d5af640164e619dc8d-1"></a>## Source: local data frame [6 x 4]
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-2"></a>##
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-3"></a>##   Sepal.Length Sepal.Width Petal.Length Petal.Width
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-4"></a>## 1          5.1         3.5          1.4         0.2
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-5"></a>## 2          4.9         3.0          1.4         0.2
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-6"></a>## 3          7.0         3.2          4.7         1.4
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-7"></a>## 4          6.4         3.2          4.5         1.5
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-8"></a>## 5          6.3         3.3          6.0         2.5
<a name="rest_code_743263f0fdb146d5af640164e619dc8d-9"></a>## 6          5.8         2.7          5.1         1.9
</pre>
<p>Добавим потерявшуюся переменную <tt class="docutils literal">Species</tt>:</p>
<pre class="code r"><a name="rest_code_b1fcf64fefdd49ae8e5741323d6baa06-1"></a><span class="nf">unnest</span><span class="p">(</span><span class="n">my_list</span><span class="p">,</span> <span class="n">Species</span><span class="p">)</span>
</pre>
<pre class="code text"><a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-1"></a>##      Species Sepal.Length Sepal.Width Petal.Length Petal.Width
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-2"></a>## 1     setosa          5.1         3.5          1.4         0.2
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-3"></a>## 2     setosa          4.9         3.0          1.4         0.2
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-4"></a>## 3 versicolor          7.0         3.2          4.7         1.4
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-5"></a>## 4 versicolor          6.4         3.2          4.5         1.5
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-6"></a>## 5  virginica          6.3         3.3          6.0         2.5
<a name="rest_code_405379f2d6cb4bff89728ca770e7a41c-7"></a>## 6  virginica          5.8         2.7          5.1         1.9
</pre>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../../../11/03/mosaic-plot/" rel="prev" title="Мозаичные диаграммы в ggplot2">Previous post</a>
            </li>
            <li class="next">
                <a href="../../../../2015/04/21/djangogirls-ru/" rel="next" title="Перевод руководства Djangogirls">Next post</a>
            </li>
        </ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
                        <div id="disqus_thread"></div>
        <script>
        var disqus_shortname ="pavelkarateev",
            disqus_url="http://pavelkarateev.com/posts/2014/12/13/tidyr-how-to/",
        disqus_title="tidyr HOW-TO",
        disqus_identifier="cache/posts/2014/12/13/tidyr.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
    <a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>


        </section></article><script>var disqus_shortname="pavelkarateev";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script></main><footer id="footer"><p>Contents © 2019         <a href="mailto:karateev.pavel@ya.ru">Pavel Karateev</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         </p>
            
        </footer>
</div>
                <script src="../../../../../assets/js/baguetteBox.min.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-57414412-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-57414412-1');
</script>
</body>
</html>
